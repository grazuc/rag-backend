2025-04-30 05:10:13,635 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 05:10:20,855 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 05:11:28,796 - __mp_main__ - INFO - Procesando manual.pdf
2025-04-30 05:43:41,325 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 05:43:48,492 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 05:43:54,567 - __mp_main__ - INFO - Procesando manual.pdf
2025-04-30 05:54:09,993 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi1', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 05:54:16,491 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 05:54:22,416 - __mp_main__ - INFO - Procesando manual.pdf
2025-04-30 06:17:10,560 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi2', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 06:17:17,563 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 06:17:23,795 - __mp_main__ - INFO - Procesando manual.pdf
2025-04-30 22:10:30,389 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi2', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 22:12:12,531 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi2', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 22:12:24,534 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 22:13:08,545 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-04-30 22:15:20,589 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi3', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-04-30 22:16:24,161 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-04-30 22:16:34,618 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-01 09:05:25,520 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi3', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-01 09:05:42,710 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-01 09:05:50,906 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-01 09:08:23,967 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi4', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-01 09:08:36,656 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-01 09:08:45,750 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-01 09:37:57,249 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi5', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-01 09:38:07,336 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-01 09:38:19,007 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-01 10:06:34,187 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi5', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-01 10:06:54,920 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-01 10:07:07,847 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-03 10:54:24,805 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi5', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-03 10:55:39,802 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-03 10:55:51,132 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-03 22:32:44,212 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi5', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-03 22:33:58,514 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-03 22:34:09,581 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-04 00:32:37,912 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi6', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 00:33:44,357 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 00:33:55,268 - __mp_main__ - INFO - Procesando manual.pdf
2025-05-04 08:25:22,835 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi7', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 08:27:00,265 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 08:27:15,249 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-04 10:54:22,937 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi7', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=11, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 10:54:26,239 - torch._subclasses.fake_tensor - INFO - FakeTensor cache stats:
2025-05-04 10:54:26,240 - torch._subclasses.fake_tensor - INFO -   cache_hits: 0
2025-05-04 10:54:26,240 - torch._subclasses.fake_tensor - INFO -   cache_misses: 0
2025-05-04 11:08:03,553 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi7', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=11, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 11:08:16,285 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 11:08:24,168 - langchain_community.vectorstores.pgvector - WARNING - Collection not found
2025-05-04 11:08:24,468 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-04 11:08:27,194 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-04 21:37:12,339 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi7', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=11, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 21:38:17,000 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 21:38:29,064 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-04 21:38:31,170 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-04 22:01:43,171 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi7', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=11, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 22:01:54,852 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 22:02:03,108 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-04 22:02:05,269 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-04 22:02:36,627 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi8', chunk_size=500, chunk_overlap=80, batch_size=100, max_workers=11, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95)
2025-05-04 22:02:46,318 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-04 22:02:54,343 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-04 22:02:56,705 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-05 08:26:45,010 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 08:27:44,938 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 08:29:37,868 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 08:29:41,871 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-05 08:29:42,057 - __mp_main__ - ERROR - Error procesando docs\programming-language-pragmatics-2ed.pdf: pypdfium2 package not found, please install it with `pip install pypdfium2`
2025-05-05 08:30:40,792 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi10', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 08:30:53,772 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 08:31:51,666 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 08:31:55,655 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-05 08:31:55,877 - __mp_main__ - ERROR - Error procesando docs\programming-language-pragmatics-2ed.pdf: pypdfium2 package not found, please install it with `pip install pypdfium2`
2025-05-05 08:36:11,209 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi10', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 08:36:21,063 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 08:36:33,082 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 08:36:36,663 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf
2025-05-05 09:16:27,109 - __main__ - ERROR - Error al insertar en PGVector: 'list' object has no attribute 'embed_documents'
2025-05-05 09:16:27,118 - __main__ - ERROR - Error en procesamiento e inserción: 'list' object has no attribute 'embed_documents'
2025-05-05 10:00:32,553 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi10', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 11:18:48,325 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi10', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 11:19:33,262 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 11:21:15,574 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 11:21:21,484 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 11:32:26,116 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multia10', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 11:32:37,320 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 11:32:55,055 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 11:40:13,429 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-large-instruct', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 11:40:26,083 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-large-instruct
2025-05-05 11:40:55,909 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 11:42:54,408 - langchain_community.vectorstores.pgvector - WARNING - Collection not found
2025-05-05 11:58:39,768 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 11:58:54,222 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 11:59:02,330 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 11:59:04,984 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 12:15:50,856 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 12:15:57,843 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 12:16:05,265 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 12:16:07,366 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 12:28:25,929 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'en', 'es'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 12:28:32,138 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 12:28:39,334 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 12:28:42,239 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 12:40:48,920 - __main__ - INFO - Configuración cargada: IngestConfig(docs_dir=WindowsPath('docs'), cache_dir=WindowsPath('.cache'), embed_model='intfloat/multilingual-e5-base', collection_name='manual_e5_multi', chunk_size=1000, chunk_overlap=200, batch_size=128, max_workers=11, max_embed_workers=4, allowed_languages={'es', 'en'}, file_extensions=['pdf', 'txt', 'docx', 'md'], deduplication=True, similarity_threshold=0.95, incremental=True, semantic_chunking=True)
2025-05-05 12:41:00,159 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 12:41:10,626 - __main__ - INFO - Conexión a PGVector verificada correctamente
2025-05-05 12:41:13,145 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:06:58,425 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:06:58,429 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:06:58,429 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:06:59,972 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:07:00,770 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:07:03,383 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-05 13:07:03,753 - __main__ - ERROR - Error al cargar el modelo de embeddings: name 'torch' is not defined
2025-05-05 13:07:03,754 - __main__ - INFO - Tiempo total de ejecución: 5.34 segundos
2025-05-05 13:27:48,454 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:27:48,457 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:27:48,457 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:27:50,396 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:27:50,798 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:27:52,877 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-05 13:27:53,322 - __main__ - ERROR - Error al cargar el modelo de embeddings: name 'torch' is not defined
2025-05-05 13:27:53,323 - __main__ - INFO - Tiempo total de ejecución: 4.87 segundos
2025-05-05 13:28:14,107 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:28:14,123 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:28:14,124 - __main__ - INFO - Archivos que necesitan procesamiento: 0
2025-05-05 13:28:14,124 - __main__ - INFO - Todos los archivos ya están procesados
2025-05-05 13:28:14,124 - __main__ - INFO - Tiempo total de ejecución: 0.02 segundos
2025-05-05 13:28:30,389 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:28:30,393 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:28:30,393 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:28:32,020 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:28:32,350 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:28:34,398 - __main__ - INFO - Procesado 2410.09871v2.pdf: 150 chunks
2025-05-05 13:28:34,858 - __main__ - ERROR - Error al cargar el modelo de embeddings: name 'torch' is not defined
2025-05-05 13:28:34,858 - __main__ - INFO - Tiempo total de ejecución: 4.47 segundos
2025-05-05 13:30:55,589 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:30:55,592 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:30:55,592 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:31:00,782 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:31:01,205 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:31:03,161 - __main__ - INFO - Procesado 2410.09871v2.pdf: 150 chunks
2025-05-05 13:31:03,964 - __main__ - INFO - Deduplicación: 150 -> 150 chunks
2025-05-05 13:31:58,536 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 13:32:06,711 - __main__ - INFO - Modelo de embeddings cargado: intfloat/multilingual-e5-base
2025-05-05 13:32:06,712 - __main__ - INFO - Calculando embeddings para 150 chunks...
2025-05-05 13:32:35,195 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-05 13:32:35,203 - __main__ - ERROR - Error al insertar en PGVector: 'NoneType' object has no attribute 'embed_documents'
2025-05-05 13:32:35,204 - __main__ - ERROR - Error en el proceso principal: 'NoneType' object has no attribute 'embed_documents'
2025-05-05 13:32:35,296 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 819, in <module>
    main()
    ~~~~^^
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 807, in main
    insert_into_pgvector(doc_embed_pairs, pg_conn, config.collection_name)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 696, in insert_into_pgvector
    vector_store = PGVector.from_documents(
        documents=[],  # Inicialmente vacío, insertaremos por lotes
    ...<3 lines>...
        pre_delete_collection=True  # No eliminar colección existente
    )
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_community\vectorstores\pgvector.py", line 1145, in from_documents
    return cls.from_texts(
           ~~~~~~~~~~~~~~^
        texts=texts,
        ^^^^^^^^^^^^
    ...<7 lines>...
        **kwargs,
        ^^^^^^^^^
    )
    ^
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_community\vectorstores\pgvector.py", line 1015, in from_texts
    embeddings = embedding.embed_documents(list(texts))
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'embed_documents'

2025-05-05 13:32:35,317 - __main__ - INFO - Tiempo total de ejecución: 99.73 segundos
2025-05-05 13:37:32,600 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:37:32,603 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:37:32,604 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:37:36,721 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:37:37,094 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:37:38,946 - __main__ - INFO - Procesado 2410.09871v2.pdf: 150 chunks
2025-05-05 13:37:39,698 - __main__ - INFO - Deduplicación: 150 -> 150 chunks
2025-05-05 13:37:46,832 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 13:37:52,767 - __main__ - INFO - Modelo de embeddings cargado: intfloat/multilingual-e5-base
2025-05-05 13:37:52,769 - __main__ - INFO - Calculando embeddings para 150 chunks...
2025-05-05 13:38:21,477 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-05 13:38:24,738 - __main__ - ERROR - Error al insertar en PGVector: PGVector.add_embeddings() missing 2 required positional arguments: 'texts' and 'embeddings'
2025-05-05 13:38:24,739 - __main__ - ERROR - Error en el proceso principal: PGVector.add_embeddings() missing 2 required positional arguments: 'texts' and 'embeddings'
2025-05-05 13:38:24,749 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 820, in <module>
    main()
    ~~~~^^
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 808, in main
    insert_into_pgvector(doc_embed_pairs, pg_conn, config.collection_name, embeddings)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 714, in insert_into_pgvector
    vector_store.add_embeddings(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        text_embeddings=list(zip([d.page_content for d in docs], embeddings_list)),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        metadatas=[d.metadata for d in docs]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: PGVector.add_embeddings() missing 2 required positional arguments: 'texts' and 'embeddings'

2025-05-05 13:38:24,768 - __main__ - INFO - Tiempo total de ejecución: 52.17 segundos
2025-05-05 13:42:58,063 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-05 13:42:58,067 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-05 13:42:58,067 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-05 13:43:02,865 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-05 13:43:03,437 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-05 13:43:05,668 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-05 13:43:06,430 - __main__ - INFO - Deduplicación: 151 -> 151 chunks
2025-05-05 13:43:15,202 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-05 13:43:20,131 - __main__ - INFO - Modelo de embeddings cargado: intfloat/multilingual-e5-base
2025-05-05 13:43:20,131 - __main__ - INFO - Calculando embeddings para 151 chunks...
2025-05-05 13:43:46,802 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-05 13:43:48,709 - __main__ - INFO - Insertados 151 documentos en la colección manual_e5_multi
2025-05-05 13:43:48,709 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-05 13:43:48,721 - __main__ - INFO - Tiempo total de ejecución: 50.66 segundos
2025-05-06 13:06:25,415 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True}
2025-05-06 13:06:25,419 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-06 13:06:25,420 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-06 13:06:30,834 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf
2025-05-06 13:06:31,720 - __mp_main__ - INFO - Chunking dinámico: size=476, overlap=100 para doc tipo pdf
2025-05-06 13:06:34,726 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-06 13:06:35,516 - __main__ - INFO - Deduplicación: 151 -> 151 chunks
2025-05-06 13:07:33,141 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-06 13:07:42,804 - __main__ - INFO - Modelo de embeddings cargado: intfloat/multilingual-e5-base
2025-05-06 13:07:42,805 - __main__ - INFO - Calculando embeddings para 151 chunks...
2025-05-06 13:08:25,739 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-06 13:08:29,608 - __main__ - INFO - Insertados 151 documentos en la colección manual_e5_multi
2025-05-06 13:08:29,608 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-06 13:08:29,630 - __main__ - INFO - Tiempo total de ejecución: 124.23 segundos
2025-05-06 14:16:40,300 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-06 14:16:40,301 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-06 14:16:40,301 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-06 14:17:07,280 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-06 14:17:07,280 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-06 14:17:07,280 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-06 14:17:16,928 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-06 14:17:24,270 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-06 14:17:24,284 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-06 14:17:24,284 - __main__ - INFO - Archivos que necesitan procesamiento: 0
2025-05-06 14:17:24,285 - __main__ - INFO - Todos los archivos ya están procesados
2025-05-06 14:17:24,286 - __main__ - INFO - Tiempo total de ejecución: 17.01 segundos
2025-05-06 14:17:47,918 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-06 14:17:47,919 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-06 14:17:47,919 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-06 14:17:53,633 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-06 14:17:58,559 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-06 14:17:58,561 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-06 14:17:58,561 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-06 14:18:03,307 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf...
2025-05-06 14:18:04,060 - __mp_main__ - INFO - Chunking dinámico para 2410.09871v2.pdf: size=476, overlap=100 (doc tipo: pdf, densidad: 0.26)
2025-05-06 14:18:05,077 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '






...'. Error: No features in text.
2025-05-06 14:18:05,237 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '









...'. Error: No features in text.
2025-05-06 14:18:05,247 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '! 
 
!
 "
!
 "
 "
!  
! !














 
...'. Error: No features in text.
2025-05-06 14:18:05,272 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '





...'. Error: No features in text.
2025-05-06 14:18:05,476 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-06 14:18:06,298 - __main__ - INFO - Deduplicación: 151 -> 151 chunks
2025-05-06 14:18:06,298 - __main__ - INFO - Calculando embeddings para 151 chunks...
2025-05-06 14:18:32,672 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-06 14:18:32,673 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: False
2025-05-06 14:18:33,597 - __main__ - INFO - Iniciando inserción de 151 embeddings en 2 lotes de tamaño 128.
2025-05-06 14:18:34,053 - __main__ - INFO - Insertados 151 documentos en 2 lotes en la colección 'manual_e5_multi'.
2025-05-06 14:18:34,053 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-06 14:18:34,055 - __main__ - INFO - Tiempo total de ejecución: 46.14 segundos
2025-05-06 15:02:14,924 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-06 15:02:14,926 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-06 15:02:14,926 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-06 15:03:04,004 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-06 15:03:14,592 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-06 15:03:14,595 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-06 15:03:14,595 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-06 15:03:20,418 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf...
2025-05-06 15:03:20,516 - __mp_main__ - ERROR - Error procesando 2410.09871v2.pdf: pypdfium2 package not found, please install it with `pip install pypdfium2`
Traceback (most recent call last):
  File "C:\Users\Gonzalo\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\LocalCache\local-packages\Python313\site-packages\langchain_community\document_loaders\parsers\pdf.py", line 1292, in lazy_parse
    import pypdfium2
ModuleNotFoundError: No module named 'pypdfium2'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 554, in process_file
    docs = loader.load()
  File "C:\Users\Gonzalo\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\LocalCache\local-packages\Python313\site-packages\langchain_core\document_loaders\base.py", line 32, in load
    return list(self.lazy_load())
  File "C:\Users\Gonzalo\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\LocalCache\local-packages\Python313\site-packages\langchain_community\document_loaders\pdf.py", line 419, in lazy_load
    yield from self.parser.parse(blob)
               ~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\Gonzalo\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\LocalCache\local-packages\Python313\site-packages\langchain_core\document_loaders\base.py", line 127, in parse
    return list(self.lazy_parse(blob))
  File "C:\Users\Gonzalo\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\LocalCache\local-packages\Python313\site-packages\langchain_community\document_loaders\parsers\pdf.py", line 1294, in lazy_parse
    raise ImportError(
    ...<2 lines>...
    )
ImportError: pypdfium2 package not found, please install it with `pip install pypdfium2`
2025-05-06 15:03:20,595 - __main__ - WARNING - No se obtuvieron chunks de 2410.09871v2.pdf
2025-05-06 15:03:21,292 - __main__ - INFO - No hay chunks para procesar después de la deduplicación
2025-05-06 15:03:21,293 - __main__ - INFO - Tiempo total de ejecución: 66.38 segundos
2025-05-06 15:04:00,201 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-06 15:04:00,201 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-06 15:04:00,202 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-06 15:04:09,387 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-06 15:04:15,060 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-06 15:04:15,065 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-06 15:04:15,066 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-06 15:04:20,997 - __mp_main__ - INFO - Procesando 2410.09871v2.pdf...
2025-05-06 15:04:21,385 - __mp_main__ - INFO - Chunking dinámico para 2410.09871v2.pdf: size=476, overlap=100 (doc tipo: pdf, densidad: 0.26)
2025-05-06 15:04:21,896 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '






...'. Error: No features in text.
2025-05-06 15:04:22,108 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '









...'. Error: No features in text.
2025-05-06 15:04:22,117 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '! 
 
!
 "
!
 "
 "
!  
! !














 
...'. Error: No features in text.
2025-05-06 15:04:22,148 - __mp_main__ - WARNING - Fallo en detección de idioma para el texto: '





...'. Error: No features in text.
2025-05-06 15:04:22,400 - __main__ - INFO - Procesado 2410.09871v2.pdf: 151 chunks
2025-05-06 15:04:23,191 - __main__ - INFO - Deduplicación: 151 -> 151 chunks
2025-05-06 15:04:23,191 - __main__ - INFO - Calculando embeddings para 151 chunks...
2025-05-06 15:04:50,662 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-06 15:04:50,662 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: False
2025-05-06 15:04:51,030 - __main__ - INFO - Iniciando inserción de 151 embeddings en 2 lotes de tamaño 128.
2025-05-06 15:04:51,483 - __main__ - INFO - Insertados 151 documentos en 2 lotes en la colección 'manual_e5_multi'.
2025-05-06 15:04:51,483 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-06 15:04:51,485 - __main__ - INFO - Tiempo total de ejecución: 51.29 segundos
2025-05-07 10:45:35,576 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 10:45:35,577 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 10:45:35,578 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 10:46:32,354 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 10:46:41,401 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 10:46:41,404 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 10:46:41,404 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-07 10:46:47,133 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 10:46:48,403 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=414, overlap=124 (doc tipo: pdf, densidad: 0.12)
2025-05-07 10:46:56,905 - __main__ - INFO - Procesado Convenio_Colectivo_nro_260-75.pdf: 1661 chunks
2025-05-07 10:46:57,669 - __main__ - INFO - Deduplicación: 1661 -> 1661 chunks
2025-05-07 10:46:57,669 - __main__ - INFO - Calculando embeddings para 1661 chunks...
2025-05-07 10:49:18,872 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-07 10:49:18,877 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: False
2025-05-07 10:49:20,126 - __main__ - INFO - Iniciando inserción de 1661 embeddings en 13 lotes de tamaño 128.
2025-05-07 10:49:23,093 - __main__ - INFO - Insertados 1661 documentos en 13 lotes en la colección 'manual_e5_multi'.
2025-05-07 10:49:23,096 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-07 10:49:23,119 - __main__ - INFO - Tiempo total de ejecución: 227.56 segundos
2025-05-07 11:16:06,063 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 11:16:06,064 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 11:16:06,065 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 11:16:14,762 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 11:16:20,374 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 11:16:20,402 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 11:16:20,402 - __main__ - INFO - Archivos que necesitan procesamiento: 0
2025-05-07 11:16:20,402 - __main__ - INFO - Todos los archivos ya están procesados
2025-05-07 11:16:20,403 - __main__ - INFO - Tiempo total de ejecución: 14.35 segundos
2025-05-07 11:16:48,339 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 11:16:48,340 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 11:16:48,340 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 11:16:55,873 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 11:17:01,686 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 11:17:01,689 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 11:17:01,690 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-07 11:17:07,548 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 11:17:08,313 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=414, overlap=124 (doc tipo: pdf, densidad: 0.12)
2025-05-07 11:17:15,591 - __main__ - INFO - Procesado Convenio_Colectivo_nro_260-75.pdf: 1661 chunks
2025-05-07 11:17:16,332 - __main__ - INFO - Deduplicación: 1661 -> 1661 chunks
2025-05-07 11:17:16,332 - __main__ - INFO - Calculando embeddings para 1661 chunks...
2025-05-07 11:19:52,634 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-07 11:19:52,642 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: True
2025-05-07 11:19:54,736 - __main__ - INFO - Iniciando inserción de 1661 embeddings en 13 lotes de tamaño 128.
2025-05-07 11:19:58,215 - __main__ - INFO - Insertados 1661 documentos en 13 lotes en la colección 'manual_e5_multi'.
2025-05-07 11:19:58,215 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-07 11:19:58,240 - __main__ - INFO - Tiempo total de ejecución: 189.91 segundos
2025-05-07 11:21:20,809 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 11:21:20,811 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 11:21:20,811 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 11:21:28,033 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 11:21:33,489 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 11:21:33,493 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 11:21:33,493 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-07 11:21:37,722 - __mp_main__ - INFO - Procesando MANUAL PARA LA IMPLEMENTACIÓN.pdf...
2025-05-07 11:21:38,349 - __mp_main__ - INFO - Chunking dinámico para MANUAL PARA LA IMPLEMENTACIÓN.pdf: size=414, overlap=99 (doc tipo: pdf, densidad: 0.15)
2025-05-07 11:21:41,259 - __main__ - INFO - Procesado MANUAL PARA LA IMPLEMENTACIÓN.pdf: 654 chunks
2025-05-07 11:21:42,033 - __main__ - INFO - Deduplicación: 654 -> 654 chunks
2025-05-07 11:21:42,033 - __main__ - INFO - Calculando embeddings para 654 chunks...
2025-05-07 11:22:39,024 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-07 11:22:39,031 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: True
2025-05-07 11:22:40,374 - __main__ - INFO - Iniciando inserción de 654 embeddings en 6 lotes de tamaño 128.
2025-05-07 11:22:41,814 - __main__ - INFO - Insertados 654 documentos en 6 lotes en la colección 'manual_e5_multi'.
2025-05-07 11:22:41,815 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-07 11:22:41,826 - __main__ - INFO - Tiempo total de ejecución: 81.02 segundos
2025-05-07 11:29:07,361 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 11:29:07,362 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 11:29:07,362 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 11:29:13,354 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 11:29:17,593 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 11:29:17,628 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 11:29:17,629 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-07 11:29:21,956 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 11:29:22,512 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=414, overlap=124 (doc tipo: pdf, densidad: 0.12)
2025-05-07 11:29:29,053 - __main__ - INFO - Procesado Convenio_Colectivo_nro_260-75.pdf: 1661 chunks
2025-05-07 11:29:29,782 - __main__ - INFO - Deduplicación: 1661 -> 1661 chunks
2025-05-07 11:29:29,782 - __main__ - INFO - Calculando embeddings para 1661 chunks...
2025-05-07 11:32:10,906 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-07 11:32:10,919 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: True
2025-05-07 11:32:14,195 - __main__ - INFO - Iniciando inserción de 1661 embeddings en 13 lotes de tamaño 128.
2025-05-07 11:32:18,651 - __main__ - INFO - Insertados 1661 documentos en 13 lotes en la colección 'manual_e5_multi'.
2025-05-07 11:32:18,652 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-07 11:32:18,684 - __main__ - INFO - Tiempo total de ejecución: 191.33 segundos
2025-05-07 11:41:52,148 - __main__ - INFO - Configuración cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 11:41:52,149 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 11:41:52,149 - __main__ - INFO - Usando dispositivo: cpu para embeddings.
2025-05-07 11:41:56,749 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 11:42:01,500 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado exitosamente.
2025-05-07 11:42:01,506 - __main__ - INFO - Total de archivos encontrados: 1
2025-05-07 11:42:01,506 - __main__ - INFO - Archivos que necesitan procesamiento: 1
2025-05-07 11:42:06,050 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 11:42:06,719 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=414, overlap=124 (doc tipo: pdf, densidad: 0.12)
2025-05-07 11:42:14,323 - __main__ - INFO - Procesado Convenio_Colectivo_nro_260-75.pdf: 1662 chunks
2025-05-07 11:42:15,235 - __main__ - INFO - Deduplicación: 1662 -> 1662 chunks
2025-05-07 11:42:15,236 - __main__ - INFO - Calculando embeddings para 1662 chunks...
2025-05-07 11:46:00,047 - __main__ - INFO - Insertando documentos en PGVector...
2025-05-07 11:46:00,057 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Pre-delete: True
2025-05-07 11:46:03,049 - __main__ - INFO - Iniciando inserción de 1662 embeddings en 13 lotes de tamaño 128.
2025-05-07 11:46:07,015 - __main__ - INFO - Insertados 1662 documentos en 13 lotes en la colección 'manual_e5_multi'.
2025-05-07 11:46:07,016 - __main__ - INFO - Proceso de ingesta completado con éxito
2025-05-07 11:46:07,038 - __main__ - INFO - Tiempo total de ejecución: 254.89 segundos
2025-05-07 12:47:36,413 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 12:47:36,415 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 12:47:36,415 - __main__ - INFO - No se detectó GPU. Usando CPU. Batch size para embeddings: 128
2025-05-07 12:47:52,579 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 12:48:00,659 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado en 24.24s.
2025-05-07 12:48:00,664 - __main__ - INFO - Dimensión de los embeddings: 768
2025-05-07 12:48:00,672 - __main__ - INFO - Escaneo de archivos completado en 0.01s.
2025-05-07 12:48:00,672 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.41 MB).
2025-05-07 12:48:00,673 - __main__ - INFO - Archivos que necesitan procesamiento: 1 (Tamaño a procesar: 0.41 MB).
2025-05-07 12:48:00,674 - __main__ - INFO - Iniciando procesamiento de archivos con 1 workers.
2025-05-07 12:48:06,451 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 12:48:08,812 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=338, overlap=112 (doc tipo: legal_pdf, densidad: 0.12)
2025-05-07 12:48:20,934 - __main__ - INFO - Procesamiento de 1 archivos completado en 20.26s. Chunks generados (brutos): 2194.
2025-05-07 12:48:20,934 - __main__ - INFO - Mejorando calidad de chunks...
2025-05-07 12:48:21,120 - __main__ - INFO - Mejora de calidad completada en 0.19s. Chunks después de mejora: 2184.
2025-05-07 12:48:21,121 - __main__ - INFO - Ejecutando deduplicación en 2184 chunks (umbral: 0.95)...
2025-05-07 12:48:30,855 - __main__ - INFO - Deduplicación completada en 9.73s. Chunks únicos: 2184 (Eliminados: 0).
2025-05-07 12:48:30,855 - __main__ - INFO - Calculando embeddings para 2184 chunks con 4 workers para embeddings y batch_size 128...
2025-05-07 12:53:43,983 - __main__ - INFO - Cálculo de embeddings completado en 313.13s. Pares Doc-Embedding generados: 2184.
2025-05-07 12:53:43,988 - __main__ - INFO - Insertando 2184 embeddings en PGVector (Colección: manual_e5_multi)...
2025-05-07 12:53:43,989 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 12:53:46,245 - __main__ - INFO - Iniciando inserción de 2184 embeddings en 22 lotes de tamaño 100.
2025-05-07 12:53:51,230 - __main__ - INFO - Insertados 2184 documentos en la colección 'manual_e5_multi'.
2025-05-07 12:53:51,230 - __main__ - INFO - Inserción en PGVector completada en 7.24s.
2025-05-07 12:53:51,230 - __main__ - INFO - Optimizando configuración de búsqueda vectorial post-ingesta...
2025-05-07 12:53:51,231 - __main__ - ERROR - Error crítico durante el proceso de ingesta principal: optimize_vector_search_config() takes 2 positional arguments but 3 were given
Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1704, in main
    optimize_vector_search_config(pg_conn, config.collection_name, embeddings_dimension)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: optimize_vector_search_config() takes 2 positional arguments but 3 were given
2025-05-07 12:53:51,241 - __main__ - INFO - Tiempo total de ejecución del script: 374.83 segundos
2025-05-07 15:37:05,252 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 15:37:05,254 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 15:37:05,254 - __main__ - INFO - No se detectó GPU. Usando CPU. Batch size para embeddings: 128
2025-05-07 15:37:57,769 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 15:38:07,886 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado en 62.63s.
2025-05-07 15:38:07,887 - __main__ - INFO - Dimensión de los embeddings: 768
2025-05-07 15:38:07,893 - __main__ - INFO - Escaneo de archivos completado en 0.00s.
2025-05-07 15:38:07,894 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.41 MB).
2025-05-07 15:38:07,894 - __main__ - INFO - Archivos que necesitan procesamiento: 1 (Tamaño a procesar: 0.41 MB).
2025-05-07 15:38:07,895 - __main__ - INFO - Iniciando procesamiento de archivos con 1 workers.
2025-05-07 15:38:13,381 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 15:38:15,675 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=338, overlap=112 (doc tipo: legal_pdf, densidad: 0.12)
2025-05-07 15:38:25,370 - __main__ - INFO - Procesamiento de 1 archivos completado en 17.48s. Chunks generados (brutos): 2194.
2025-05-07 15:38:25,370 - __main__ - INFO - Mejorando calidad de chunks...
2025-05-07 15:38:25,549 - __main__ - INFO - Mejora de calidad completada en 0.18s. Chunks después de mejora: 2184.
2025-05-07 15:38:25,550 - __main__ - INFO - Ejecutando deduplicación en 2184 chunks (umbral: 0.95)...
2025-05-07 15:38:34,677 - __main__ - INFO - Deduplicación completada en 9.13s. Chunks únicos: 2184 (Eliminados: 0).
2025-05-07 15:38:34,677 - __main__ - INFO - Calculando embeddings para 2184 chunks con 4 workers para embeddings y batch_size 128...
2025-05-07 15:42:20,878 - __main__ - INFO - Cálculo de embeddings completado en 226.19s. Pares Doc-Embedding generados: 2184.
2025-05-07 15:42:20,892 - __main__ - INFO - Insertando 2184 embeddings en PGVector (Colección: manual_e5_multi)...
2025-05-07 15:42:20,893 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 15:42:25,191 - __main__ - INFO - Iniciando inserción de 2184 embeddings en 22 lotes de tamaño 100.
2025-05-07 15:42:31,614 - __main__ - INFO - Insertados 2184 documentos en la colección 'manual_e5_multi'.
2025-05-07 15:42:31,615 - __main__ - INFO - Inserción en PGVector completada en 10.72s.
2025-05-07 15:42:31,617 - __main__ - INFO - Optimizando configuración de búsqueda vectorial post-ingesta...
2025-05-07 15:42:31,621 - __main__ - ERROR - Error crítico durante el proceso de ingesta principal: optimize_vector_search_config() takes 2 positional arguments but 3 were given
Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1704, in main
    optimize_vector_search_config(pg_conn, config.collection_name, embeddings_dimension)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: optimize_vector_search_config() takes 2 positional arguments but 3 were given
2025-05-07 15:42:31,645 - __main__ - INFO - Tiempo total de ejecución del script: 326.39 segundos
2025-05-07 15:48:14,978 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 15:48:14,980 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 15:48:14,980 - __main__ - INFO - No se detectó GPU. Usando CPU. Batch size para embeddings: 128
2025-05-07 15:48:22,322 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 15:48:27,225 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado en 12.25s.
2025-05-07 15:48:27,226 - __main__ - INFO - Dimensión de los embeddings: 768
2025-05-07 15:48:27,232 - __main__ - INFO - Escaneo de archivos completado en 0.00s.
2025-05-07 15:48:27,232 - __main__ - INFO - Archivos encontrados: 2 (Total: 5.91 MB).
2025-05-07 15:48:27,232 - __main__ - INFO - Archivos que necesitan procesamiento: 2 (Tamaño a procesar: 5.91 MB).
2025-05-07 15:48:27,233 - __main__ - INFO - Iniciando procesamiento de archivos con 2 workers.
2025-05-07 15:48:32,410 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 15:48:32,410 - __mp_main__ - INFO - Procesando manual_simonit_unrn.pdf...
2025-05-07 15:48:33,211 - __mp_main__ - INFO - Chunking dinámico para manual_simonit_unrn.pdf: size=397, overlap=128 (doc tipo: pdf, densidad: 0.21)
2025-05-07 15:48:33,293 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=338, overlap=112 (doc tipo: legal_pdf, densidad: 0.12)
2025-05-07 15:48:42,674 - __main__ - INFO - Procesamiento de 2 archivos completado en 15.44s. Chunks generados (brutos): 2837.
2025-05-07 15:48:42,675 - __main__ - INFO - Mejorando calidad de chunks...
2025-05-07 15:48:42,882 - __main__ - INFO - Mejora de calidad completada en 0.21s. Chunks después de mejora: 2783.
2025-05-07 15:48:42,883 - __main__ - INFO - Ejecutando deduplicación en 2783 chunks (umbral: 0.95)...
2025-05-07 15:48:53,183 - __main__ - INFO - Tiempo total de ejecución del script: 38.20 segundos
2025-05-07 15:49:03,819 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 15:49:03,819 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 15:49:03,820 - __main__ - INFO - No se detectó GPU. Usando CPU. Batch size para embeddings: 128
2025-05-07 15:49:09,889 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 15:49:14,249 - __main__ - INFO - Modelo de embeddings 'intfloat/multilingual-e5-base' cargado en 10.43s.
2025-05-07 15:49:14,249 - __main__ - INFO - Dimensión de los embeddings: 768
2025-05-07 15:49:14,250 - __main__ - INFO - Escaneo de archivos completado en 0.00s.
2025-05-07 15:49:14,251 - __main__ - INFO - Archivos encontrados: 2 (Total: 5.91 MB).
2025-05-07 15:49:14,251 - __main__ - INFO - Archivos que necesitan procesamiento: 2 (Tamaño a procesar: 5.91 MB).
2025-05-07 15:49:14,251 - __main__ - INFO - Iniciando procesamiento de archivos con 2 workers.
2025-05-07 15:49:18,269 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 15:49:18,270 - __mp_main__ - INFO - Procesando manual_simonit_unrn.pdf...
2025-05-07 15:49:19,081 - __mp_main__ - INFO - Chunking dinámico para manual_simonit_unrn.pdf: size=397, overlap=128 (doc tipo: pdf, densidad: 0.21)
2025-05-07 15:49:19,159 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=338, overlap=112 (doc tipo: legal_pdf, densidad: 0.12)
2025-05-07 15:49:29,695 - __main__ - INFO - Procesamiento de 2 archivos completado en 15.44s. Chunks generados (brutos): 2836.
2025-05-07 15:49:29,696 - __main__ - INFO - Mejorando calidad de chunks...
2025-05-07 15:49:29,967 - __main__ - INFO - Mejora de calidad completada en 0.27s. Chunks después de mejora: 2782.
2025-05-07 15:49:29,967 - __main__ - INFO - Ejecutando deduplicación en 2782 chunks (umbral: 0.95)...
2025-05-07 15:49:45,320 - __main__ - INFO - Deduplicación completada en 15.35s. Chunks únicos: 2782 (Eliminados: 0).
2025-05-07 15:49:45,321 - __main__ - INFO - Calculando embeddings para 2782 chunks con 4 workers para embeddings y batch_size 128...
2025-05-07 15:54:11,550 - __main__ - INFO - Cálculo de embeddings completado en 266.23s. Pares Doc-Embedding generados: 2782.
2025-05-07 15:54:11,560 - __main__ - INFO - Insertando 2782 embeddings en PGVector (Colección: manual_e5_multi)...
2025-05-07 15:54:11,563 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 15:54:14,729 - __main__ - INFO - Iniciando inserción de 2782 embeddings en 28 lotes de tamaño 100.
2025-05-07 15:54:22,252 - __main__ - INFO - Insertados 2782 documentos en la colección 'manual_e5_multi'.
2025-05-07 15:54:22,253 - __main__ - INFO - Inserción en PGVector completada en 10.69s.
2025-05-07 15:54:22,253 - __main__ - INFO - Optimizando configuración de búsqueda vectorial post-ingesta...
2025-05-07 15:54:22,349 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 15:54:22,353 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 15:54:22,353 - __main__ - INFO - Verificando salud de la base de datos vectorial post-ingesta...
2025-05-07 15:54:22,387 - __main__ - ERROR - Error al monitorear la base de datos vectorial: relation "langchain_pg_embedding.manual_e5_multi" does not exist
LINE 2:             SELECT COUNT(*) FROM langchain_pg_embedding.manu...
                                         ^

2025-05-07 15:54:22,388 - __main__ - INFO - Optimización y monitoreo post-ingesta completados en 0.13s.
2025-05-07 15:54:22,390 - __main__ - INFO - --- Resumen del Proceso de Ingesta ---
2025-05-07 15:54:22,390 - __main__ - INFO - Archivos procesados esta ejecución: 2
2025-05-07 15:54:22,390 - __main__ - INFO - Chunks finales insertados: 2782
2025-05-07 15:54:22,390 - __main__ - INFO - Promedio de chunks finales por archivo procesado: 1391.00
2025-05-07 15:54:22,390 - __main__ - INFO - Tiempos por etapa:
2025-05-07 15:54:22,392 - __main__ - INFO -   - Load model: 10.43s
2025-05-07 15:54:22,392 - __main__ - INFO -   - File scan: 0.00s
2025-05-07 15:54:22,393 - __main__ - INFO -   - File processing: 15.44s
2025-05-07 15:54:22,393 - __main__ - INFO -   - Quality improvement: 0.27s
2025-05-07 15:54:22,393 - __main__ - INFO -   - Deduplication: 15.35s
2025-05-07 15:54:22,393 - __main__ - INFO -   - Embedding generation: 266.23s
2025-05-07 15:54:22,394 - __main__ - INFO -   - Db insertion: 10.69s
2025-05-07 15:54:22,394 - __main__ - INFO -   - Post ingest optimization: 0.13s
2025-05-07 15:54:22,394 - __main__ - INFO - Tiempo total de ingesta: 318.57s
2025-05-07 15:54:22,394 - __main__ - INFO - Proceso de ingesta completado con éxito.
2025-05-07 15:54:22,395 - __main__ - INFO - Tiempo total de ejecución del script: 318.58 segundos
2025-05-07 16:00:50,540 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 16:00:50,541 - __main__ - INFO - Memoria inicial: 228.24 MB
2025-05-07 16:00:50,542 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 16:00:55,888 - __main__ - ERROR - Error durante el procesamiento: SentenceTransformer.__init__() got an unexpected keyword argument 'torch_dtype'
2025-05-07 16:00:55,926 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1540, in main
    embeddings = HuggingFaceEmbeddings(
        model_name=config.embed_model,
        model_kwargs=model_kwargs,
        encode_kwargs=encode_kwargs
    )
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.model_name, cache_folder=self.cache_folder, **self.model_kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: SentenceTransformer.__init__() got an unexpected keyword argument 'torch_dtype'

2025-05-07 16:00:55,927 - __main__ - CRITICAL - Error crítico en el proceso de ingesta: SentenceTransformer.__init__() got an unexpected keyword argument 'torch_dtype'
2025-05-07 16:00:55,929 - __main__ - CRITICAL - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1540, in main
    embeddings = HuggingFaceEmbeddings(
        model_name=config.embed_model,
        model_kwargs=model_kwargs,
        encode_kwargs=encode_kwargs
    )
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\Lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.model_name, cache_folder=self.cache_folder, **self.model_kwargs
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: SentenceTransformer.__init__() got an unexpected keyword argument 'torch_dtype'

2025-05-07 16:02:06,364 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 16:02:06,365 - __main__ - INFO - Memoria inicial: 228.00 MB
2025-05-07 16:02:06,365 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 16:02:09,590 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 16:02:14,242 - __main__ - INFO - Modelo de embeddings cargado en 7.88s
2025-05-07 16:02:14,243 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 16:02:14,243 - __main__ - INFO - Memoria después de cargar modelo: 609.85 MB
2025-05-07 16:02:14,245 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 16:02:14,246 - __main__ - INFO - Archivos encontrados: 2 (Total: 5.91 MB)
2025-05-07 16:02:14,246 - __main__ - INFO - Archivos a procesar: 2 (Tamaño: 5.91 MB)
2025-05-07 16:02:17,539 - __mp_main__ - INFO - Procesando Convenio_Colectivo_nro_260-75.pdf...
2025-05-07 16:02:17,539 - __mp_main__ - INFO - Procesando manual_simonit_unrn.pdf...
2025-05-07 16:02:18,311 - __mp_main__ - INFO - Chunking dinámico para manual_simonit_unrn.pdf: size=397, overlap=128 (doc tipo: pdf, densidad: 0.21)
2025-05-07 16:02:18,408 - __mp_main__ - INFO - Chunking dinámico para Convenio_Colectivo_nro_260-75.pdf: size=338, overlap=112 (doc tipo: legal_pdf, densidad: 0.12)
2025-05-07 16:02:27,434 - __main__ - INFO - Procesamiento de archivos completado en 13.19s
2025-05-07 16:02:27,434 - __main__ - INFO - Chunks generados: 2833
2025-05-07 16:02:27,435 - __main__ - INFO - Memoria después de procesar archivos: 619.43 MB
2025-05-07 16:02:27,639 - __main__ - INFO - Mejora de calidad completada en 0.20s
2025-05-07 16:02:27,639 - __main__ - INFO - Chunks después de mejora: 2779
2025-05-07 16:02:42,065 - __main__ - INFO - Deduplicación completada en 14.43s
2025-05-07 16:02:42,065 - __main__ - INFO - Chunks después de deduplicación: 2779
2025-05-07 16:06:20,154 - __main__ - INFO - Generación de embeddings completada en 218.08s
2025-05-07 16:06:20,159 - __main__ - INFO - Pares Doc-Embedding generados: 2779
2025-05-07 16:06:20,161 - __main__ - INFO - Memoria después de generar embeddings: 963.02 MB
2025-05-07 16:06:20,162 - __main__ - INFO - Insertando 2779 embeddings en PGVector...
2025-05-07 16:06:20,164 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 16:06:22,155 - __main__ - INFO - Iniciando inserción de 2779 embeddings en 28 lotes de tamaño 100.
2025-05-07 16:06:27,056 - __main__ - INFO - Insertados 2779 documentos en la colección 'manual_e5_multi'.
2025-05-07 16:06:27,057 - __main__ - INFO - Inserción en base de datos completada en 6.90s
2025-05-07 16:06:27,097 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 16:06:27,100 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 16:06:27,161 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 16:06:27,161 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 16:06:27,576 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 16:06:27,912 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 16:06:28,217 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 16:06:28,523 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 16:06:28,830 - __main__ - INFO - Resultados de validación:
2025-05-07 16:06:28,831 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 16:06:28,831 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.60
2025-05-07 16:06:28,831 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 16:06:28,832 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 16:06:28,832 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 16:06:28,833 - __main__ - INFO - Optimización y validación completadas en 1.78s
2025-05-07 16:06:28,834 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 16:06:28,834 - __main__ - INFO - {
  "total_time": 262.4684250354767,
  "stage_times": {
    "load_model": 7.877223491668701,
    "file_scan": 0.0019006729125976562,
    "file_processing": 13.18773627281189,
    "quality_improvement": 0.20341730117797852,
    "deduplication": 14.425246477127075,
    "embedding_generation": 218.0843780040741,
    "db_insertion": 6.895127534866333,
    "optimization": 1.7753105163574219
  },
  "memory_usage": {
    "initial": 228.0,
    "after_model": 609.84765625,
    "after_processing": 619.4296875,
    "after_embeddings": 963.0234375,
    "final": 616.97265625
  },
  "files_processed": 2,
  "total_chunks": 2833,
  "final_chunks": 2779,
  "embeddings_generated": 2779
}
2025-05-07 16:06:28,837 - __main__ - INFO - Limpieza de recursos...
2025-05-07 16:40:31,667 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 16:40:31,668 - __main__ - INFO - Memoria inicial: 227.85 MB
2025-05-07 16:40:31,668 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 16:40:37,995 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 16:40:45,856 - __main__ - INFO - Modelo de embeddings cargado en 14.19s
2025-05-07 16:40:45,856 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 16:40:45,857 - __main__ - INFO - Memoria después de cargar modelo: 610.98 MB
2025-05-07 16:40:45,859 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 16:40:45,859 - __main__ - INFO - Archivos encontrados: 1 (Total: 8.18 MB)
2025-05-07 16:40:45,859 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 8.18 MB)
2025-05-07 16:40:49,690 - __mp_main__ - INFO - Procesando programming-language-pragmatics-2ed.pdf...
2025-05-07 16:40:53,147 - __mp_main__ - INFO - Chunking dinámico para programming-language-pragmatics-2ed.pdf: size=397, overlap=128 (doc tipo: pdf, densidad: 0.04)
2025-05-07 16:40:55,638 - __mp_main__ - WARNING - Fallo en detección de idioma: '1        b5           
2  b2  ...'. Error: No features in text.
2025-05-07 16:41:15,154 - __main__ - INFO - Procesamiento de archivos completado en 29.29s
2025-05-07 16:41:15,154 - __main__ - INFO - Chunks generados: 7820
2025-05-07 16:41:15,154 - __main__ - INFO - Memoria después de procesar archivos: 552.86 MB
2025-05-07 16:41:15,802 - __main__ - INFO - Mejora de calidad completada en 0.65s
2025-05-07 16:41:15,802 - __main__ - INFO - Chunks después de mejora: 7752
2025-05-07 16:43:31,381 - __main__ - INFO - Deduplicación completada en 135.58s
2025-05-07 16:43:31,382 - __main__ - INFO - Chunks después de deduplicación: 7752
2025-05-07 16:58:28,197 - __main__ - INFO - Generación de embeddings completada en 896.81s
2025-05-07 16:58:28,211 - __main__ - INFO - Pares Doc-Embedding generados: 7752
2025-05-07 16:58:28,221 - __main__ - INFO - Memoria después de generar embeddings: 1123.69 MB
2025-05-07 16:58:28,221 - __main__ - INFO - Insertando 7752 embeddings en PGVector...
2025-05-07 16:58:28,224 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 16:58:30,212 - __main__ - INFO - Iniciando inserción de 7752 embeddings en 78 lotes de tamaño 100.
2025-05-07 16:58:42,515 - __main__ - INFO - Insertados 7752 documentos en la colección 'manual_e5_multi'.
2025-05-07 16:58:42,516 - __main__ - INFO - Inserción en base de datos completada en 14.29s
2025-05-07 16:58:42,555 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 16:58:42,560 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 16:58:42,616 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 16:58:42,616 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 16:58:43,085 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 16:58:43,476 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 16:58:43,817 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 16:58:44,158 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 16:58:44,492 - __main__ - INFO - Resultados de validación:
2025-05-07 16:58:44,492 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 16:58:44,493 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 16:58:44,493 - __main__ - INFO -   - Superposición media entre métodos: 1.80
2025-05-07 16:58:44,493 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 16:58:44,494 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 16:58:44,495 - __main__ - INFO - Optimización y validación completadas en 1.98s
2025-05-07 16:58:44,496 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 16:58:44,496 - __main__ - INFO - {
  "total_time": 1092.827523946762,
  "stage_times": {
    "load_model": 14.187926054000854,
    "file_scan": 0.0008623600006103516,
    "file_processing": 29.293919324874878,
    "quality_improvement": 0.6468300819396973,
    "deduplication": 135.57851147651672,
    "embedding_generation": 896.8082940578461,
    "db_insertion": 14.294471740722656,
    "optimization": 1.9789445400238037
  },
  "memory_usage": {
    "initial": 227.84765625,
    "after_model": 610.984375,
    "after_processing": 552.859375,
    "after_embeddings": 1123.69140625,
    "final": 786.80859375
  },
  "files_processed": 1,
  "total_chunks": 7820,
  "final_chunks": 7752,
  "embeddings_generated": 7752
}
2025-05-07 16:58:44,499 - __main__ - INFO - Limpieza de recursos...
2025-05-07 18:13:54,037 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 18:13:54,038 - __main__ - INFO - Memoria inicial: 213.91 MB
2025-05-07 18:13:54,038 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 18:14:00,635 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 18:14:06,220 - __main__ - INFO - Modelo de embeddings cargado en 12.18s
2025-05-07 18:14:06,221 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 18:14:06,221 - __main__ - INFO - Memoria después de cargar modelo: 588.39 MB
2025-05-07 18:14:06,223 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 18:14:06,223 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.31 MB)
2025-05-07 18:14:06,223 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.31 MB)
2025-05-07 18:14:10,160 - __mp_main__ - INFO - Procesando www_mercadolibre.com.pdf...
2025-05-07 18:14:11,426 - __mp_main__ - INFO - Chunking dinámico para www_mercadolibre.com.pdf: size=397, overlap=132 (doc tipo: pdf, densidad: 0.33)
2025-05-07 18:14:12,337 - __main__ - INFO - Procesamiento de archivos completado en 6.11s
2025-05-07 18:14:12,337 - __main__ - INFO - Chunks generados: 49
2025-05-07 18:14:12,338 - __main__ - INFO - Memoria después de procesar archivos: 540.13 MB
2025-05-07 18:14:12,345 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 18:14:12,345 - __main__ - INFO - Chunks después de mejora: 49
2025-05-07 18:14:12,353 - __main__ - INFO - Deduplicación completada en 0.01s
2025-05-07 18:14:12,353 - __main__ - INFO - Chunks después de deduplicación: 49
2025-05-07 18:14:12,354 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 18:14:18,341 - __main__ - INFO - Generación de embeddings completada en 5.99s
2025-05-07 18:14:18,341 - __main__ - INFO - Pares Doc-Embedding generados: 49
2025-05-07 18:14:18,341 - __main__ - INFO - Memoria después de generar embeddings: 670.45 MB
2025-05-07 18:14:18,341 - __main__ - INFO - Insertando 49 embeddings en PGVector...
2025-05-07 18:14:18,342 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 18:14:21,360 - __main__ - INFO - Iniciando inserción de 49 embeddings en 1 lotes de tamaño 100.
2025-05-07 18:14:21,576 - __main__ - INFO - Insertados 49 documentos en la colección 'manual_e5_multi'.
2025-05-07 18:14:21,577 - __main__ - INFO - Inserción en base de datos completada en 3.24s
2025-05-07 18:14:21,650 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 18:14:21,656 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 18:14:21,738 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 18:14:21,739 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 18:14:22,117 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 18:14:22,421 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 18:14:22,710 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 18:14:22,972 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 18:14:23,261 - __main__ - INFO - Resultados de validación:
2025-05-07 18:14:23,261 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 18:14:23,262 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 18:14:23,262 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 18:14:23,262 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 18:14:23,262 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 18:14:23,263 - __main__ - INFO - Optimización y validación completadas en 1.68s
2025-05-07 18:14:23,263 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 18:14:23,264 - __main__ - INFO - {
  "total_time": 29.224669933319092,
  "stage_times": {
    "load_model": 12.182234525680542,
    "file_scan": 0.001004934310913086,
    "file_processing": 6.112530469894409,
    "quality_improvement": 0.005995035171508789,
    "deduplication": 0.00716090202331543,
    "embedding_generation": 5.986716270446777,
    "db_insertion": 3.236208438873291,
    "optimization": 1.684776782989502
  },
  "memory_usage": {
    "initial": 213.91015625,
    "after_model": 588.38671875,
    "after_processing": 540.1328125,
    "after_embeddings": 670.4453125,
    "final": 512.1796875
  },
  "files_processed": 1,
  "total_chunks": 49,
  "final_chunks": 49,
  "embeddings_generated": 49
}
2025-05-07 18:14:23,266 - __main__ - INFO - Limpieza de recursos...
2025-05-07 19:50:39,801 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 19:50:39,802 - __main__ - INFO - Memoria inicial: 213.49 MB
2025-05-07 19:50:39,802 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 19:50:46,563 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 19:50:52,680 - __main__ - INFO - Modelo de embeddings cargado en 12.88s
2025-05-07 19:50:52,681 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 19:50:52,682 - __main__ - INFO - Memoria después de cargar modelo: 447.93 MB
2025-05-07 19:50:52,686 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 19:50:52,687 - __main__ - INFO - Archivos encontrados: 2 (Total: 0.49 MB)
2025-05-07 19:50:52,688 - __main__ - INFO - Archivos a procesar: 2 (Tamaño: 0.49 MB)
2025-05-07 19:50:58,848 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 19:50:58,848 - __mp_main__ - INFO - Procesando www_mercadolibre.com.pdf...
2025-05-07 19:50:59,566 - __mp_main__ - INFO - Chunking dinámico para www_mercadolibre.com.pdf: size=397, overlap=132 (doc tipo: pdf, densidad: 0.33)
2025-05-07 19:50:59,566 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 19:51:01,378 - __main__ - INFO - Procesamiento de archivos completado en 8.69s
2025-05-07 19:51:01,380 - __main__ - INFO - Chunks generados: 147
2025-05-07 19:51:01,380 - __main__ - INFO - Memoria después de procesar archivos: 448.90 MB
2025-05-07 19:51:01,396 - __main__ - INFO - Mejora de calidad completada en 0.02s
2025-05-07 19:51:01,397 - __main__ - INFO - Chunks después de mejora: 146
2025-05-07 19:51:01,454 - __main__ - INFO - Deduplicación completada en 0.06s
2025-05-07 19:51:01,455 - __main__ - INFO - Chunks después de deduplicación: 146
2025-05-07 19:51:01,455 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 19:51:20,512 - __main__ - INFO - Generación de embeddings completada en 19.06s
2025-05-07 19:51:20,513 - __main__ - INFO - Pares Doc-Embedding generados: 146
2025-05-07 19:51:20,513 - __main__ - INFO - Memoria después de generar embeddings: 534.89 MB
2025-05-07 19:51:20,514 - __main__ - INFO - Insertando 146 embeddings en PGVector...
2025-05-07 19:51:20,515 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 19:51:21,817 - __main__ - INFO - Iniciando inserción de 146 embeddings en 2 lotes de tamaño 100.
2025-05-07 19:51:22,447 - __main__ - INFO - Insertados 146 documentos en la colección 'manual_e5_multi'.
2025-05-07 19:51:22,448 - __main__ - INFO - Inserción en base de datos completada en 1.93s
2025-05-07 19:51:22,529 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 19:51:22,535 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 19:51:22,653 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 19:51:22,654 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 19:51:23,141 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 19:51:23,476 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 19:51:23,788 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 19:51:24,089 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 19:51:24,454 - __main__ - INFO - Resultados de validación:
2025-05-07 19:51:24,455 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 19:51:24,455 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-07 19:51:24,455 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 19:51:24,456 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 19:51:24,456 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 19:51:24,457 - __main__ - INFO - Optimización y validación completadas en 2.01s
2025-05-07 19:51:24,457 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 19:51:24,458 - __main__ - INFO - {
  "total_time": 44.65580463409424,
  "stage_times": {
    "load_model": 12.87660264968872,
    "file_scan": 0.002006053924560547,
    "file_processing": 8.690378189086914,
    "quality_improvement": 0.015825748443603516,
    "deduplication": 0.05725717544555664,
    "embedding_generation": 19.057140588760376,
    "db_insertion": 1.9336881637573242,
    "optimization": 2.009390115737915
  },
  "memory_usage": {
    "initial": 213.4921875,
    "after_model": 447.9296875,
    "after_processing": 448.90234375,
    "after_embeddings": 534.89453125,
    "final": 469.625
  },
  "files_processed": 2,
  "total_chunks": 147,
  "final_chunks": 146,
  "embeddings_generated": 146
}
2025-05-07 19:51:24,461 - __main__ - INFO - Limpieza de recursos...
2025-05-07 19:51:53,856 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 19:51:53,857 - __main__ - INFO - Memoria inicial: 213.91 MB
2025-05-07 19:51:53,857 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 19:52:01,579 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 19:52:07,574 - __main__ - INFO - Modelo de embeddings cargado en 13.72s
2025-05-07 19:52:07,575 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 19:52:07,575 - __main__ - INFO - Memoria después de cargar modelo: 511.29 MB
2025-05-07 19:52:07,577 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 19:52:07,577 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-07 19:52:07,578 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-07 19:52:12,220 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 19:52:12,797 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 19:52:13,824 - __main__ - INFO - Procesamiento de archivos completado en 6.25s
2025-05-07 19:52:13,825 - __main__ - INFO - Chunks generados: 98
2025-05-07 19:52:13,825 - __main__ - INFO - Memoria después de procesar archivos: 510.12 MB
2025-05-07 19:52:13,834 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 19:52:13,835 - __main__ - INFO - Chunks después de mejora: 97
2025-05-07 19:52:13,854 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-07 19:52:13,855 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-07 19:52:13,855 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 19:52:30,393 - __main__ - INFO - Generación de embeddings completada en 16.54s
2025-05-07 19:52:30,396 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-07 19:52:30,399 - __main__ - INFO - Memoria después de generar embeddings: 766.61 MB
2025-05-07 19:52:30,399 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-07 19:52:30,402 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 19:52:31,873 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-07 19:52:32,373 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-07 19:52:32,373 - __main__ - INFO - Inserción en base de datos completada en 1.97s
2025-05-07 19:52:32,479 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 19:52:32,484 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 19:52:32,560 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 19:52:32,560 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 19:52:33,323 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 19:52:33,662 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 19:52:33,976 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 19:52:34,315 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 19:52:34,626 - __main__ - INFO - Resultados de validación:
2025-05-07 19:52:34,626 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 19:52:34,627 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 19:52:34,627 - __main__ - INFO -   - Superposición media entre métodos: 1.20
2025-05-07 19:52:34,627 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-07 19:52:34,628 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 19:52:34,628 - __main__ - INFO - Optimización y validación completadas en 2.25s
2025-05-07 19:52:34,628 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 19:52:34,629 - __main__ - INFO - {
  "total_time": 40.77047824859619,
  "stage_times": {
    "load_model": 13.71691083908081,
    "file_scan": 0.0010182857513427734,
    "file_processing": 6.245369911193848,
    "quality_improvement": 0.008101940155029297,
    "deduplication": 0.0189974308013916,
    "embedding_generation": 16.536267280578613,
    "db_insertion": 1.9738082885742188,
    "optimization": 2.253488779067993
  },
  "memory_usage": {
    "initial": 213.91015625,
    "after_model": 511.29296875,
    "after_processing": 510.1171875,
    "after_embeddings": 766.609375,
    "final": 482.484375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-07 19:52:34,631 - __main__ - INFO - Limpieza de recursos...
2025-05-07 19:59:25,896 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 19:59:25,897 - __main__ - INFO - Memoria inicial: 213.60 MB
2025-05-07 19:59:25,897 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 19:59:32,763 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 19:59:38,276 - __main__ - INFO - Modelo de embeddings cargado en 12.38s
2025-05-07 19:59:38,277 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 19:59:38,278 - __main__ - INFO - Memoria después de cargar modelo: 432.72 MB
2025-05-07 19:59:38,280 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 19:59:38,281 - __main__ - INFO - Archivos encontrados: 1 (Total: 14.91 MB)
2025-05-07 19:59:38,281 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 14.91 MB)
2025-05-07 19:59:42,953 - __mp_main__ - INFO - Procesando guia-para-equipos-de-salud-programa-telecovid19.pdf...
2025-05-07 19:59:43,644 - __mp_main__ - INFO - Chunking dinámico para guia-para-equipos-de-salud-programa-telecovid19.pdf: size=397, overlap=128 (doc tipo: pdf, densidad: 0.17)
2025-05-07 19:59:45,774 - __main__ - INFO - Procesamiento de archivos completado en 7.49s
2025-05-07 19:59:45,774 - __main__ - INFO - Chunks generados: 260
2025-05-07 19:59:45,775 - __main__ - INFO - Memoria después de procesar archivos: 434.75 MB
2025-05-07 19:59:45,801 - __main__ - INFO - Mejora de calidad completada en 0.03s
2025-05-07 19:59:45,801 - __main__ - INFO - Chunks después de mejora: 258
2025-05-07 19:59:45,925 - __main__ - INFO - Deduplicación completada en 0.12s
2025-05-07 19:59:45,926 - __main__ - INFO - Chunks después de deduplicación: 255
2025-05-07 19:59:45,927 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 20:00:21,078 - __main__ - INFO - Generación de embeddings completada en 35.15s
2025-05-07 20:00:21,083 - __main__ - INFO - Pares Doc-Embedding generados: 255
2025-05-07 20:00:21,089 - __main__ - INFO - Memoria después de generar embeddings: 1033.05 MB
2025-05-07 20:00:21,089 - __main__ - INFO - Insertando 255 embeddings en PGVector...
2025-05-07 20:00:21,091 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 20:00:22,967 - __main__ - INFO - Iniciando inserción de 255 embeddings en 3 lotes de tamaño 100.
2025-05-07 20:00:23,935 - __main__ - INFO - Insertados 255 documentos en la colección 'manual_e5_multi'.
2025-05-07 20:00:23,936 - __main__ - INFO - Inserción en base de datos completada en 2.85s
2025-05-07 20:00:24,022 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 20:00:24,027 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 20:00:24,113 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 20:00:24,113 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 20:00:24,536 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 20:00:24,875 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 20:00:25,193 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 20:00:25,484 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 20:00:25,797 - __main__ - INFO - Resultados de validación:
2025-05-07 20:00:25,798 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 20:00:25,798 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 20:00:25,798 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 20:00:25,799 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 20:00:25,799 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 20:00:25,799 - __main__ - INFO - Optimización y validación completadas en 1.86s
2025-05-07 20:00:25,800 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 20:00:25,802 - __main__ - INFO - {
  "total_time": 59.9037127494812,
  "stage_times": {
    "load_model": 12.378616333007812,
    "file_scan": 0.0010023117065429688,
    "file_processing": 7.49286413192749,
    "quality_improvement": 0.02599811553955078,
    "deduplication": 0.12424540519714355,
    "embedding_generation": 35.14674639701843,
    "db_insertion": 2.8470280170440674,
    "optimization": 1.862943172454834
  },
  "memory_usage": {
    "initial": 213.59765625,
    "after_model": 432.72265625,
    "after_processing": 434.74609375,
    "after_embeddings": 1033.046875,
    "final": 474.765625
  },
  "files_processed": 1,
  "total_chunks": 260,
  "final_chunks": 255,
  "embeddings_generated": 255
}
2025-05-07 20:00:25,803 - __main__ - INFO - Limpieza de recursos...
2025-05-07 20:04:33,331 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 20:04:33,332 - __main__ - INFO - Memoria inicial: 213.79 MB
2025-05-07 20:04:33,332 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 20:05:00,605 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 20:05:05,767 - __main__ - INFO - Modelo de embeddings cargado en 32.44s
2025-05-07 20:05:05,768 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 20:05:05,768 - __main__ - INFO - Memoria después de cargar modelo: 504.99 MB
2025-05-07 20:05:05,770 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 20:05:05,770 - __main__ - INFO - Archivos encontrados: 1 (Total: 1.15 MB)
2025-05-07 20:05:05,771 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 1.15 MB)
2025-05-07 20:05:09,949 - __mp_main__ - INFO - Procesando 145bc8fc-8537-4787-98ea-b49c57dc739d.pdf...
2025-05-07 20:05:12,213 - __mp_main__ - INFO - Chunking dinámico para 145bc8fc-8537-4787-98ea-b49c57dc739d.pdf: size=300, overlap=100 (doc tipo: pdf, densidad: 0.04)
2025-05-07 20:05:28,601 - __mp_main__ - WARNING - Fallo en detección de idioma: '6,255 1,317 6,191 827 5,658 833...'. Error: No features in text.
2025-05-07 20:05:34,944 - __main__ - INFO - Procesamiento de archivos completado en 29.17s
2025-05-07 20:05:34,945 - __main__ - INFO - Chunks generados: 6648
2025-05-07 20:05:34,945 - __main__ - INFO - Memoria después de procesar archivos: 529.04 MB
2025-05-07 20:05:35,337 - __main__ - INFO - Mejora de calidad completada en 0.39s
2025-05-07 20:05:35,337 - __main__ - INFO - Chunks después de mejora: 6554
2025-05-07 20:06:41,076 - __main__ - INFO - Deduplicación completada en 65.74s
2025-05-07 20:06:41,076 - __main__ - INFO - Chunks después de deduplicación: 6477
2025-05-07 20:13:39,505 - __main__ - INFO - Generación de embeddings completada en 418.43s
2025-05-07 20:13:39,510 - __main__ - INFO - Pares Doc-Embedding generados: 6477
2025-05-07 20:13:39,514 - __main__ - INFO - Memoria después de generar embeddings: 842.64 MB
2025-05-07 20:13:39,514 - __main__ - INFO - Insertando 6477 embeddings en PGVector...
2025-05-07 20:13:39,516 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 20:13:40,910 - __main__ - INFO - Iniciando inserción de 6477 embeddings en 65 lotes de tamaño 100.
2025-05-07 20:13:55,609 - __main__ - INFO - Insertados 6477 documentos en la colección 'manual_e5_multi'.
2025-05-07 20:13:55,609 - __main__ - INFO - Inserción en base de datos completada en 16.09s
2025-05-07 20:13:55,644 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 20:13:55,648 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 20:13:55,707 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 20:13:55,708 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 20:13:56,191 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 20:13:56,569 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 20:13:56,942 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 20:13:57,280 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 20:13:57,635 - __main__ - INFO - Resultados de validación:
2025-05-07 20:13:57,635 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 20:13:57,635 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 20:13:57,636 - __main__ - INFO -   - Superposición media entre métodos: 1.20
2025-05-07 20:13:57,636 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-07 20:13:57,636 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 20:13:57,637 - __main__ - INFO - Optimización y validación completadas en 2.03s
2025-05-07 20:13:57,638 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 20:13:57,639 - __main__ - INFO - {
  "total_time": 564.306499004364,
  "stage_times": {
    "load_model": 32.43546772003174,
    "file_scan": 0.0010302066802978516,
    "file_processing": 29.17307734489441,
    "quality_improvement": 0.39032983779907227,
    "deduplication": 65.73804688453674,
    "embedding_generation": 418.42535877227783,
    "db_insertion": 16.094419479370117,
    "optimization": 2.0283682346343994
  },
  "memory_usage": {
    "initial": 213.78515625,
    "after_model": 504.9921875,
    "after_processing": 529.0390625,
    "after_embeddings": 842.640625,
    "final": 716.16015625
  },
  "files_processed": 1,
  "total_chunks": 6648,
  "final_chunks": 6477,
  "embeddings_generated": 6477
}
2025-05-07 20:13:57,641 - __main__ - INFO - Limpieza de recursos...
2025-05-07 20:16:53,892 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-07 20:16:53,893 - __main__ - INFO - Memoria inicial: 213.05 MB
2025-05-07 20:16:53,893 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 20:17:01,610 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 20:17:06,968 - __main__ - INFO - Modelo de embeddings cargado en 13.07s
2025-05-07 20:17:06,969 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 20:17:06,969 - __main__ - INFO - Memoria después de cargar modelo: 515.93 MB
2025-05-07 20:17:06,971 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 20:17:06,971 - __main__ - INFO - Archivos encontrados: 1 (Total: 2.54 MB)
2025-05-07 20:17:06,972 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 2.54 MB)
2025-05-07 20:17:11,686 - __mp_main__ - INFO - Procesando Foucault-Castigar.pdf...
2025-05-07 20:17:13,541 - __mp_main__ - INFO - Chunking dinámico para Foucault-Castigar.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.11)
2025-05-07 20:17:34,516 - __main__ - INFO - Procesamiento de archivos completado en 27.54s
2025-05-07 20:17:34,517 - __main__ - INFO - Chunks generados: 3578
2025-05-07 20:17:34,517 - __main__ - INFO - Memoria después de procesar archivos: 527.71 MB
2025-05-07 20:17:34,791 - __main__ - INFO - Mejora de calidad completada en 0.27s
2025-05-07 20:17:34,791 - __main__ - INFO - Chunks después de mejora: 3554
2025-05-07 20:18:01,682 - __main__ - INFO - Deduplicación completada en 26.89s
2025-05-07 20:18:01,683 - __main__ - INFO - Chunks después de deduplicación: 3554
2025-05-07 20:22:42,339 - __main__ - INFO - Generación de embeddings completada en 280.65s
2025-05-07 20:22:42,343 - __main__ - INFO - Pares Doc-Embedding generados: 3554
2025-05-07 20:22:42,347 - __main__ - INFO - Memoria después de generar embeddings: 920.70 MB
2025-05-07 20:22:42,347 - __main__ - INFO - Insertando 3554 embeddings en PGVector...
2025-05-07 20:22:42,350 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-07 20:22:44,861 - __main__ - INFO - Iniciando inserción de 3554 embeddings en 36 lotes de tamaño 100.
2025-05-07 20:22:52,263 - __main__ - INFO - Insertados 3554 documentos en la colección 'manual_e5_multi'.
2025-05-07 20:22:52,263 - __main__ - INFO - Inserción en base de datos completada en 9.92s
2025-05-07 20:22:52,315 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 20:22:52,319 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 20:22:52,381 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 20:22:52,382 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 20:22:52,818 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 20:22:53,141 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 20:22:53,456 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 20:22:53,761 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 20:22:54,090 - __main__ - INFO - Resultados de validación:
2025-05-07 20:22:54,090 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-07 20:22:54,091 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-07 20:22:54,091 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 20:22:54,091 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 20:22:54,091 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-07 20:22:54,092 - __main__ - INFO - Optimización y validación completadas en 1.83s
2025-05-07 20:22:54,092 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 20:22:54,094 - __main__ - INFO - {
  "total_time": 360.19945907592773,
  "stage_times": {
    "load_model": 13.07498288154602,
    "file_scan": 0.0010035037994384766,
    "file_processing": 27.54421091079712,
    "quality_improvement": 0.2742326259613037,
    "deduplication": 26.889631748199463,
    "embedding_generation": 280.65391993522644,
    "db_insertion": 9.915064811706543,
    "optimization": 1.828798532485962
  },
  "memory_usage": {
    "initial": 213.046875,
    "after_model": 515.92578125,
    "after_processing": 527.71484375,
    "after_embeddings": 920.69921875,
    "final": 624.1640625
  },
  "files_processed": 1,
  "total_chunks": 3578,
  "final_chunks": 3554,
  "embeddings_generated": 3554
}
2025-05-07 20:22:54,097 - __main__ - INFO - Limpieza de recursos...
2025-05-07 21:20:20,283 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 21:20:20,284 - __main__ - INFO - Memoria inicial: 213.47 MB
2025-05-07 21:20:20,284 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 21:20:25,921 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 21:20:32,664 - __main__ - INFO - Modelo de embeddings cargado en 12.38s
2025-05-07 21:20:32,664 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 21:20:32,665 - __main__ - INFO - Memoria después de cargar modelo: 489.22 MB
2025-05-07 21:20:32,683 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 21:20:32,683 - __main__ - INFO - Archivos encontrados: 4 (Total: 5.93 MB)
2025-05-07 21:20:32,683 - __main__ - INFO - Archivos a procesar: 4 (Tamaño: 5.93 MB)
2025-05-07 21:20:38,250 - __mp_main__ - INFO - Procesando 11-Sistemadearchivos.pdf...
2025-05-07 21:20:38,250 - __mp_main__ - INFO - Procesando 206175102_03_2025_factura_25_04_2025-22_25_49.pdf...
2025-05-07 21:20:38,256 - __mp_main__ - INFO - Procesando Foucault-Castigar.pdf...
2025-05-07 21:20:38,269 - __mp_main__ - INFO - Procesando www_mercadolibre.com.pdf...
2025-05-07 21:20:39,285 - __mp_main__ - INFO - Chunking dinámico para 206175102_03_2025_factura_25_04_2025-22_25_49.pdf: size=360, overlap=120 (doc tipo: legal_pdf, densidad: 0.59)
2025-05-07 21:20:39,315 - __mp_main__ - INFO - Chunking dinámico para 11-Sistemadearchivos.pdf: size=398, overlap=127 (doc tipo: pdf, densidad: 0.16)
2025-05-07 21:20:40,500 - __mp_main__ - INFO - Chunking dinámico para Foucault-Castigar.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.11)
2025-05-07 21:20:58,387 - __main__ - INFO - Procesamiento de archivos completado en 25.70s
2025-05-07 21:20:58,387 - __main__ - INFO - Chunks generados: 3861
2025-05-07 21:20:58,387 - __main__ - INFO - Memoria después de procesar archivos: 500.25 MB
2025-05-07 21:20:58,844 - __main__ - INFO - Mejora de calidad completada en 0.46s
2025-05-07 21:20:58,844 - __main__ - INFO - Chunks después de mejora: 3824
2025-05-07 21:21:29,852 - __main__ - INFO - Deduplicación completada en 31.01s
2025-05-07 21:21:29,853 - __main__ - INFO - Chunks después de deduplicación: 3824
2025-05-07 21:26:42,670 - __main__ - INFO - Generación de embeddings completada en 312.81s
2025-05-07 21:26:42,678 - __main__ - INFO - Pares Doc-Embedding generados: 3824
2025-05-07 21:26:42,682 - __main__ - INFO - Memoria después de generar embeddings: 857.64 MB
2025-05-07 21:26:42,682 - __main__ - INFO - Insertando 3824 embeddings en PGVector...
2025-05-07 21:26:42,684 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-07 21:26:43,644 - __main__ - INFO - Iniciando inserción de 3824 embeddings en 39 lotes de tamaño 100.
2025-05-07 21:26:55,287 - __main__ - INFO - Insertados 3824 documentos en la colección 'manual_e5_multi'.
2025-05-07 21:26:55,288 - __main__ - INFO - Inserción en base de datos completada en 12.61s
2025-05-07 21:26:55,360 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 21:26:55,365 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 21:26:55,447 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 21:26:55,447 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 21:26:56,879 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 21:26:57,247 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 21:26:57,602 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 21:26:57,951 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 21:26:58,283 - __main__ - INFO - Resultados de validación:
2025-05-07 21:26:58,283 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 21:26:58,284 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-07 21:26:58,284 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 21:26:58,284 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 21:26:58,284 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-07 21:26:58,284 - __main__ - INFO - Optimización y validación completadas en 3.00s
2025-05-07 21:26:58,285 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 21:26:58,286 - __main__ - INFO - {
  "total_time": 398.0008406639099,
  "stage_times": {
    "load_model": 12.380476713180542,
    "file_scan": 0.0020017623901367188,
    "file_processing": 25.704014539718628,
    "quality_improvement": 0.45665884017944336,
    "deduplication": 31.00753688812256,
    "embedding_generation": 312.8113534450531,
    "db_insertion": 12.605432748794556,
    "optimization": 2.9962050914764404
  },
  "memory_usage": {
    "initial": 213.46875,
    "after_model": 489.21875,
    "after_processing": 500.25,
    "after_embeddings": 857.63671875,
    "final": 561.640625
  },
  "files_processed": 4,
  "total_chunks": 3861,
  "final_chunks": 3824,
  "embeddings_generated": 3824
}
2025-05-07 21:35:58,719 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 21:35:58,720 - __main__ - INFO - Memoria inicial: 213.43 MB
2025-05-07 21:35:58,721 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 21:36:26,238 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 21:36:33,396 - __main__ - INFO - Modelo de embeddings cargado en 34.67s
2025-05-07 21:36:33,397 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 21:36:33,398 - __main__ - INFO - Memoria después de cargar modelo: 456.22 MB
2025-05-07 21:36:33,407 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 21:36:33,407 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-07 21:36:33,407 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-07 21:36:38,467 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 21:36:39,211 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 21:36:40,229 - __main__ - INFO - Procesamiento de archivos completado en 6.82s
2025-05-07 21:36:40,229 - __main__ - INFO - Chunks generados: 98
2025-05-07 21:36:40,229 - __main__ - INFO - Memoria después de procesar archivos: 457.23 MB
2025-05-07 21:36:40,242 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 21:36:40,242 - __main__ - INFO - Chunks después de mejora: 97
2025-05-07 21:36:40,260 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-07 21:36:40,260 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-07 21:36:40,260 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 21:36:55,094 - __main__ - INFO - Generación de embeddings completada en 14.83s
2025-05-07 21:36:55,094 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-07 21:36:55,094 - __main__ - INFO - Memoria después de generar embeddings: 1018.62 MB
2025-05-07 21:36:55,095 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-07 21:36:55,095 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-07 21:36:55,546 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-07 21:36:56,128 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-07 21:36:56,128 - __main__ - INFO - Inserción en base de datos completada en 1.03s
2025-05-07 21:36:56,202 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 21:36:56,207 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 21:36:56,309 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 21:36:56,309 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 21:36:58,009 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 21:36:58,403 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 21:36:58,814 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 21:36:59,175 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 21:36:59,548 - __main__ - INFO - Resultados de validación:
2025-05-07 21:36:59,548 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 21:36:59,548 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-07 21:36:59,549 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 21:36:59,549 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 21:36:59,549 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-07 21:36:59,549 - __main__ - INFO - Optimización y validación completadas en 3.42s
2025-05-07 21:36:59,549 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 21:36:59,549 - __main__ - INFO - {
  "total_time": 60.82886528968811,
  "stage_times": {
    "load_model": 34.67471694946289,
    "file_scan": 0.0015118122100830078,
    "file_processing": 6.8217549324035645,
    "quality_improvement": 0.013157844543457031,
    "deduplication": 0.018079519271850586,
    "embedding_generation": 14.833680391311646,
    "db_insertion": 1.0336320400238037,
    "optimization": 3.420419216156006
  },
  "memory_usage": {
    "initial": 213.42578125,
    "after_model": 456.21875,
    "after_processing": 457.2265625,
    "after_embeddings": 1018.625,
    "final": 586.99609375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-07 21:37:32,156 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 21:37:32,157 - __main__ - INFO - Memoria inicial: 214.02 MB
2025-05-07 21:37:32,157 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 21:37:40,077 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 21:37:46,062 - __main__ - INFO - Modelo de embeddings cargado en 13.90s
2025-05-07 21:37:46,062 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 21:37:46,062 - __main__ - INFO - Memoria después de cargar modelo: 588.14 MB
2025-05-07 21:37:46,072 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 21:37:46,072 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-07 21:37:46,073 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-07 21:37:51,062 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 21:37:51,681 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 21:37:53,038 - __main__ - INFO - Procesamiento de archivos completado en 6.96s
2025-05-07 21:37:53,038 - __main__ - INFO - Chunks generados: 98
2025-05-07 21:37:53,038 - __main__ - INFO - Memoria después de procesar archivos: 588.43 MB
2025-05-07 21:37:53,047 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 21:37:53,047 - __main__ - INFO - Chunks después de mejora: 97
2025-05-07 21:37:53,065 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-07 21:37:53,066 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-07 21:37:53,066 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 21:38:08,610 - __main__ - INFO - Generación de embeddings completada en 15.54s
2025-05-07 21:38:08,611 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-07 21:38:08,611 - __main__ - INFO - Memoria después de generar embeddings: 814.40 MB
2025-05-07 21:38:08,611 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-07 21:38:08,611 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-07 21:38:09,163 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-07 21:38:09,631 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-07 21:38:09,632 - __main__ - INFO - Inserción en base de datos completada en 1.02s
2025-05-07 21:38:09,725 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 21:38:09,731 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 21:38:09,888 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 21:38:09,888 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 21:38:11,661 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 21:38:12,033 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 21:38:12,378 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 21:38:12,727 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 21:38:13,055 - __main__ - INFO - Resultados de validación:
2025-05-07 21:38:13,055 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 21:38:13,055 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-07 21:38:13,056 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 21:38:13,056 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 21:38:13,056 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-07 21:38:13,056 - __main__ - INFO - Optimización y validación completadas en 3.42s
2025-05-07 21:38:13,056 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 21:38:13,056 - __main__ - INFO - {
  "total_time": 40.90076804161072,
  "stage_times": {
    "load_model": 13.90405559539795,
    "file_scan": 0.0009975433349609375,
    "file_processing": 6.964946746826172,
    "quality_improvement": 0.008993148803710938,
    "deduplication": 0.01756596565246582,
    "embedding_generation": 15.544122219085693,
    "db_insertion": 1.0210392475128174,
    "optimization": 3.424494504928589
  },
  "memory_usage": {
    "initial": 214.0234375,
    "after_model": 588.140625,
    "after_processing": 588.43359375,
    "after_embeddings": 814.3984375,
    "final": 438.2890625
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-07 21:45:39,793 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 21:45:39,795 - __main__ - INFO - Memoria inicial: 214.04 MB
2025-05-07 21:45:39,795 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 21:45:48,037 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 21:45:54,691 - __main__ - INFO - Modelo de embeddings cargado en 14.90s
2025-05-07 21:45:54,693 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 21:45:54,693 - __main__ - INFO - Memoria después de cargar modelo: 450.84 MB
2025-05-07 21:45:54,728 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 21:45:54,728 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-07 21:45:54,728 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-07 21:45:59,685 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 21:46:00,351 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 21:46:01,471 - __main__ - INFO - Procesamiento de archivos completado en 6.74s
2025-05-07 21:46:01,471 - __main__ - INFO - Chunks generados: 98
2025-05-07 21:46:01,471 - __main__ - INFO - Memoria después de procesar archivos: 451.64 MB
2025-05-07 21:46:01,480 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 21:46:01,480 - __main__ - INFO - Chunks después de mejora: 97
2025-05-07 21:46:01,499 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-07 21:46:01,499 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-07 21:46:01,499 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 21:46:17,990 - __main__ - INFO - Generación de embeddings completada en 16.49s
2025-05-07 21:46:17,995 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-07 21:46:17,999 - __main__ - INFO - Memoria después de generar embeddings: 764.67 MB
2025-05-07 21:46:18,000 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-07 21:46:18,002 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-07 21:46:19,038 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-07 21:46:19,627 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-07 21:46:19,627 - __main__ - INFO - Inserción en base de datos completada en 1.63s
2025-05-07 21:46:19,758 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 21:46:19,763 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 21:46:19,864 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 21:46:19,865 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 21:46:21,942 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 21:46:22,351 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 21:46:22,803 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 21:46:23,199 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 21:46:23,569 - __main__ - INFO - Resultados de validación:
2025-05-07 21:46:23,570 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 21:46:23,570 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-07 21:46:23,570 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 21:46:23,570 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 21:46:23,570 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-07 21:46:23,570 - __main__ - INFO - Optimización y validación completadas en 3.94s
2025-05-07 21:46:23,570 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 21:46:23,572 - __main__ - INFO - {
  "total_time": 43.77585458755493,
  "stage_times": {
    "load_model": 14.89673376083374,
    "file_scan": 0.0010073184967041016,
    "file_processing": 6.742246389389038,
    "quality_improvement": 0.009718656539916992,
    "deduplication": 0.018299102783203125,
    "embedding_generation": 16.488892793655396,
    "db_insertion": 1.626796007156372,
    "optimization": 3.9436020851135254
  },
  "memory_usage": {
    "initial": 214.03515625,
    "after_model": 450.8359375,
    "after_processing": 451.63671875,
    "after_embeddings": 764.66796875,
    "final": 408.7734375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-07 21:50:43,368 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-07 21:50:43,370 - __main__ - INFO - Memoria inicial: 214.11 MB
2025-05-07 21:50:43,370 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-07 21:50:51,651 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-07 21:50:58,557 - __main__ - INFO - Modelo de embeddings cargado en 15.19s
2025-05-07 21:50:58,558 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-07 21:50:58,558 - __main__ - INFO - Memoria después de cargar modelo: 444.51 MB
2025-05-07 21:50:58,571 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-07 21:50:58,571 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-07 21:50:58,571 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-07 21:51:03,863 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-07 21:51:04,499 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-07 21:51:05,625 - __main__ - INFO - Procesamiento de archivos completado en 7.05s
2025-05-07 21:51:05,625 - __main__ - INFO - Chunks generados: 98
2025-05-07 21:51:05,626 - __main__ - INFO - Memoria después de procesar archivos: 445.24 MB
2025-05-07 21:51:05,635 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-07 21:51:05,635 - __main__ - INFO - Chunks después de mejora: 97
2025-05-07 21:51:05,653 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-07 21:51:05,653 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-07 21:51:05,653 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-07 21:51:21,106 - __main__ - INFO - Generación de embeddings completada en 15.45s
2025-05-07 21:51:21,106 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-07 21:51:21,107 - __main__ - INFO - Memoria después de generar embeddings: 872.43 MB
2025-05-07 21:51:21,107 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-07 21:51:21,107 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-07 21:51:21,656 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-07 21:51:22,168 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-07 21:51:22,168 - __main__ - INFO - Inserción en base de datos completada en 1.06s
2025-05-07 21:51:22,233 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-07 21:51:22,238 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-07 21:51:22,325 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-07 21:51:22,326 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-07 21:51:24,201 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-07 21:51:24,569 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-07 21:51:24,956 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-07 21:51:25,301 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-07 21:51:25,653 - __main__ - INFO - Resultados de validación:
2025-05-07 21:51:25,654 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-07 21:51:25,654 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-07 21:51:25,654 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-07 21:51:25,654 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-07 21:51:25,654 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-07 21:51:25,654 - __main__ - INFO - Optimización y validación completadas en 3.49s
2025-05-07 21:51:25,654 - __main__ - INFO - Reporte de rendimiento:
2025-05-07 21:51:25,655 - __main__ - INFO - {
  "total_time": 42.28596067428589,
  "stage_times": {
    "load_model": 15.187550067901611,
    "file_scan": 0.0010001659393310547,
    "file_processing": 7.053798675537109,
    "quality_improvement": 0.00899958610534668,
    "deduplication": 0.017999887466430664,
    "embedding_generation": 15.452492952346802,
    "db_insertion": 1.0615344047546387,
    "optimization": 3.485956907272339
  },
  "memory_usage": {
    "initial": 214.11328125,
    "after_model": 444.51171875,
    "after_processing": 445.2421875,
    "after_embeddings": 872.42578125,
    "final": 455.33984375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 10:51:53,872 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 10:51:53,873 - __main__ - INFO - Memoria inicial: 213.64 MB
2025-05-08 10:51:53,874 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 10:52:01,126 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 10:52:07,787 - __main__ - INFO - Modelo de embeddings cargado en 13.91s
2025-05-08 10:52:07,787 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 10:52:07,787 - __main__ - INFO - Memoria después de cargar modelo: 378.91 MB
2025-05-08 10:52:07,802 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 10:52:07,802 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 10:52:07,802 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 10:52:12,412 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 10:52:13,067 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 10:52:14,098 - __main__ - INFO - Procesamiento de archivos completado en 6.30s
2025-05-08 10:52:14,099 - __main__ - INFO - Chunks generados: 98
2025-05-08 10:52:14,099 - __main__ - INFO - Memoria después de procesar archivos: 380.14 MB
2025-05-08 10:52:14,113 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 10:52:14,113 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 10:52:14,138 - __main__ - INFO - Deduplicación completada en 0.03s
2025-05-08 10:52:14,138 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 10:52:14,138 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 10:52:31,227 - __main__ - INFO - Generación de embeddings completada en 17.08s
2025-05-08 10:52:31,233 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 10:52:31,243 - __main__ - INFO - Memoria después de generar embeddings: 174.08 MB
2025-05-08 10:52:31,244 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 10:52:31,246 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 10:52:31,975 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 10:52:32,412 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 10:52:32,412 - __main__ - INFO - Inserción en base de datos completada en 1.17s
2025-05-08 10:52:32,473 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 10:52:32,476 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 10:52:32,554 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 10:52:32,554 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 10:52:38,037 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 10:52:38,568 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 10:52:39,271 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 10:52:39,961 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 10:52:40,729 - __main__ - INFO - Resultados de validación:
2025-05-08 10:52:40,729 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-08 10:52:40,730 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-08 10:52:40,730 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 10:52:40,730 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 10:52:40,730 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-08 10:52:40,731 - __main__ - INFO - Optimización y validación completadas en 8.32s
2025-05-08 10:52:40,736 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 10:52:40,741 - __main__ - INFO - {
  "total_time": 46.858421087265015,
  "stage_times": {
    "load_model": 13.91348648071289,
    "file_scan": 0.0,
    "file_processing": 6.29573130607605,
    "quality_improvement": 0.013599872589111328,
    "deduplication": 0.025029420852661133,
    "embedding_generation": 17.08444046974182,
    "db_insertion": 1.168123483657837,
    "optimization": 8.318872213363647
  },
  "memory_usage": {
    "initial": 213.63671875,
    "after_model": 378.9140625,
    "after_processing": 380.140625,
    "after_embeddings": 174.08203125,
    "final": 370.90234375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 17:07:22,809 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 17:07:22,812 - __main__ - INFO - Memoria inicial: 213.29 MB
2025-05-08 17:07:22,812 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 17:07:56,420 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 17:08:03,545 - __main__ - INFO - Modelo de embeddings cargado en 40.73s
2025-05-08 17:08:03,546 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 17:08:03,546 - __main__ - INFO - Memoria después de cargar modelo: 434.75 MB
2025-05-08 17:08:03,554 - __main__ - INFO - Escaneo de archivos completado en 0.01s
2025-05-08 17:08:03,554 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 17:08:03,555 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 17:08:10,077 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 17:08:11,803 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 17:08:12,910 - __main__ - INFO - Procesamiento de archivos completado en 9.36s
2025-05-08 17:08:12,911 - __main__ - INFO - Chunks generados: 98
2025-05-08 17:08:12,911 - __main__ - INFO - Memoria después de procesar archivos: 436.19 MB
2025-05-08 17:08:12,924 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 17:08:12,925 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 17:08:12,951 - __main__ - INFO - Deduplicación completada en 0.03s
2025-05-08 17:08:12,952 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 17:08:12,953 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 17:08:29,174 - __main__ - INFO - Generación de embeddings completada en 16.22s
2025-05-08 17:08:29,175 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 17:08:29,178 - __main__ - INFO - Memoria después de generar embeddings: 709.59 MB
2025-05-08 17:08:29,178 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 17:08:29,178 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 17:08:29,904 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 17:08:30,495 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 17:08:30,496 - __main__ - INFO - Inserción en base de datos completada en 1.32s
2025-05-08 17:08:30,573 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 17:08:30,579 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 17:08:30,666 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 17:08:30,666 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 17:08:32,293 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 17:08:32,695 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 17:08:33,062 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 17:08:33,432 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 17:08:33,774 - __main__ - INFO - Resultados de validación:
2025-05-08 17:08:33,775 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.60
2025-05-08 17:08:33,775 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 2.20
2025-05-08 17:08:33,777 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 17:08:33,777 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 17:08:33,777 - __main__ - INFO - Recomendación: MMR muestra mayor diversidad de fuentes. Recomendado para consultas exploratorias.
2025-05-08 17:08:33,777 - __main__ - INFO - Optimización y validación completadas en 3.28s
2025-05-08 17:08:33,778 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 17:08:33,778 - __main__ - INFO - {
  "total_time": 70.96606993675232,
  "stage_times": {
    "load_model": 40.73278832435608,
    "file_scan": 0.0062596797943115234,
    "file_processing": 9.355447769165039,
    "quality_improvement": 0.012054681777954102,
    "deduplication": 0.02564692497253418,
    "embedding_generation": 16.220664024353027,
    "db_insertion": 1.3189034461975098,
    "optimization": 3.2802584171295166
  },
  "memory_usage": {
    "initial": 213.28515625,
    "after_model": 434.75,
    "after_processing": 436.1875,
    "after_embeddings": 709.5859375,
    "final": 407.54296875
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 17:17:20,725 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-08 17:17:20,727 - __main__ - INFO - Memoria inicial: 213.18 MB
2025-05-08 17:17:20,727 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 17:17:28,522 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 17:17:34,065 - __main__ - INFO - Modelo de embeddings cargado en 13.34s
2025-05-08 17:17:34,066 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 17:17:34,066 - __main__ - INFO - Memoria después de cargar modelo: 588.82 MB
2025-05-08 17:17:34,068 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 17:17:34,069 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 17:17:34,069 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 17:17:38,690 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 17:17:39,343 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 17:17:40,482 - __main__ - INFO - Procesamiento de archivos completado en 6.41s
2025-05-08 17:17:40,483 - __main__ - INFO - Chunks generados: 98
2025-05-08 17:17:40,484 - __main__ - INFO - Memoria después de procesar archivos: 588.97 MB
2025-05-08 17:17:40,496 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 17:17:40,496 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 17:17:40,518 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 17:17:40,519 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 17:17:40,519 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 17:17:55,714 - __main__ - INFO - Generación de embeddings completada en 15.20s
2025-05-08 17:17:55,716 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 17:17:55,721 - __main__ - INFO - Memoria después de generar embeddings: 774.86 MB
2025-05-08 17:17:55,722 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 17:17:55,723 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-08 17:17:57,439 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 17:17:57,956 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 17:17:57,956 - __main__ - INFO - Inserción en base de datos completada en 2.23s
2025-05-08 17:17:58,033 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 17:17:58,039 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 17:17:58,121 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 17:17:58,122 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 17:17:58,796 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 17:17:59,133 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 17:17:59,458 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 17:17:59,765 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 17:18:00,056 - __main__ - INFO - Resultados de validación:
2025-05-08 17:18:00,056 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 17:18:00,057 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-08 17:18:00,057 - __main__ - INFO -   - Superposición media entre métodos: 1.20
2025-05-08 17:18:00,057 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-08 17:18:00,057 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 17:18:00,057 - __main__ - INFO - Optimización y validación completadas en 2.10s
2025-05-08 17:18:00,058 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 17:18:00,059 - __main__ - INFO - {
  "total_time": 39.33151459693909,
  "stage_times": {
    "load_model": 13.33727765083313,
    "file_scan": 0.0010058879852294922,
    "file_processing": 6.4132630825042725,
    "quality_improvement": 0.010643720626831055,
    "deduplication": 0.02102041244506836,
    "embedding_generation": 15.195439338684082,
    "db_insertion": 2.2340316772460938,
    "optimization": 2.0997378826141357
  },
  "memory_usage": {
    "initial": 213.1796875,
    "after_model": 588.81640625,
    "after_processing": 588.96875,
    "after_embeddings": 774.86328125,
    "final": 410.18359375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 17:18:00,062 - __main__ - INFO - Limpieza de recursos...
2025-05-08 17:57:45,268 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 17:57:45,269 - __main__ - INFO - Memoria inicial: 213.48 MB
2025-05-08 17:57:45,269 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 17:57:53,995 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 17:58:00,881 - __main__ - INFO - Modelo de embeddings cargado en 15.61s
2025-05-08 17:58:00,881 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 17:58:00,882 - __main__ - INFO - Memoria después de cargar modelo: 386.87 MB
2025-05-08 17:58:00,907 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 17:58:00,907 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 17:58:00,907 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 17:58:05,886 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 17:58:06,721 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 17:58:08,020 - __main__ - INFO - Procesamiento de archivos completado en 7.11s
2025-05-08 17:58:08,020 - __main__ - INFO - Chunks generados: 98
2025-05-08 17:58:08,020 - __main__ - INFO - Memoria después de procesar archivos: 387.70 MB
2025-05-08 17:58:08,036 - __main__ - INFO - Mejora de calidad completada en 0.02s
2025-05-08 17:58:08,036 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 17:58:08,063 - __main__ - INFO - Deduplicación completada en 0.03s
2025-05-08 17:58:08,064 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 17:58:08,064 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 17:58:23,865 - __main__ - INFO - Generación de embeddings completada en 15.80s
2025-05-08 17:58:23,870 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 17:58:23,874 - __main__ - INFO - Memoria después de generar embeddings: 755.35 MB
2025-05-08 17:58:23,874 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 17:58:23,875 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 17:58:24,780 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 17:58:25,656 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 17:58:25,656 - __main__ - INFO - Inserción en base de datos completada en 1.78s
2025-05-08 17:58:25,742 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 17:58:25,749 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 17:58:25,848 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 17:58:25,848 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 17:58:27,224 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 17:58:27,554 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 17:58:27,874 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 17:58:28,173 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 17:58:28,473 - __main__ - INFO - Resultados de validación:
2025-05-08 17:58:28,473 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 17:58:28,473 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-08 17:58:28,474 - __main__ - INFO -   - Superposición media entre métodos: 1.40
2025-05-08 17:58:28,474 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-08 17:58:28,474 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 17:58:28,474 - __main__ - INFO - Optimización y validación completadas en 2.82s
2025-05-08 17:58:28,474 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 17:58:28,475 - __main__ - INFO - {
  "total_time": 43.20499610900879,
  "stage_times": {
    "load_model": 15.612244606018066,
    "file_scan": 0.0,
    "file_processing": 7.111536264419556,
    "quality_improvement": 0.016275882720947266,
    "deduplication": 0.026781797409057617,
    "embedding_generation": 15.798590183258057,
    "db_insertion": 1.7818026542663574,
    "optimization": 2.817634344100952
  },
  "memory_usage": {
    "initial": 213.484375,
    "after_model": 386.8671875,
    "after_processing": 387.6953125,
    "after_embeddings": 755.34765625,
    "final": 406.40234375
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 18:05:14,822 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:05:14,823 - __main__ - INFO - Memoria inicial: 213.78 MB
2025-05-08 18:05:14,824 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:05:23,016 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:06:29,613 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:06:29,614 - __main__ - INFO - Memoria inicial: 213.06 MB
2025-05-08 18:06:29,614 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:06:36,380 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:08:18,323 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:08:18,323 - __main__ - INFO - Memoria inicial: 213.63 MB
2025-05-08 18:08:18,323 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:08:25,205 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:10:39,993 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:10:39,994 - __main__ - INFO - Memoria inicial: 213.36 MB
2025-05-08 18:10:39,994 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:10:46,933 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:12:44,212 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:12:44,213 - __main__ - INFO - Memoria inicial: 213.34 MB
2025-05-08 18:12:44,213 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:12:50,750 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:12:56,121 - __main__ - INFO - Modelo de embeddings cargado en 11.91s
2025-05-08 18:12:56,122 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 18:12:56,123 - __main__ - INFO - Memoria después de cargar modelo: 444.95 MB
2025-05-08 18:12:56,167 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 18:12:56,167 - __main__ - INFO - Archivos encontrados: 2 (Total: 3.22 MB)
2025-05-08 18:12:56,167 - __main__ - INFO - Archivos a procesar: 2 (Tamaño: 3.22 MB)
2025-05-08 18:13:01,214 - __mp_main__ - INFO - Procesando 11-Sistemadearchivos.pdf...
2025-05-08 18:13:01,214 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 18:13:02,457 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 18:13:02,560 - __mp_main__ - INFO - Chunking dinámico para 11-Sistemadearchivos.pdf: size=398, overlap=127 (doc tipo: pdf, densidad: 0.16)
2025-05-08 18:13:04,948 - __main__ - INFO - Procesamiento de archivos completado en 8.78s
2025-05-08 18:13:04,948 - __main__ - INFO - Chunks generados: 319
2025-05-08 18:13:04,948 - __main__ - INFO - Memoria después de procesar archivos: 423.18 MB
2025-05-08 18:13:04,984 - __main__ - INFO - Mejora de calidad completada en 0.04s
2025-05-08 18:13:04,984 - __main__ - INFO - Chunks después de mejora: 305
2025-05-08 18:13:05,181 - __main__ - INFO - Deduplicación completada en 0.20s
2025-05-08 18:13:05,182 - __main__ - INFO - Chunks después de deduplicación: 305
2025-05-08 18:13:05,182 - __main__ - INFO - Procesando embeddings en paralelo: 305 chunks, 4 workers, 3 bloques
2025-05-08 18:13:41,326 - __main__ - INFO - Generación de embeddings completada en 36.14s
2025-05-08 18:13:41,328 - __main__ - INFO - Pares Doc-Embedding generados: 305
2025-05-08 18:13:41,331 - __main__ - INFO - Memoria después de generar embeddings: 675.74 MB
2025-05-08 18:13:41,331 - __main__ - INFO - Insertando 305 embeddings en PGVector...
2025-05-08 18:13:41,332 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 18:13:41,900 - __main__ - INFO - Iniciando inserción de 305 embeddings en 4 lotes de tamaño 100.
2025-05-08 18:13:42,899 - __main__ - INFO - Insertados 305 documentos en la colección 'manual_e5_multi'.
2025-05-08 18:13:42,899 - __main__ - INFO - Inserción en base de datos completada en 1.57s
2025-05-08 18:13:42,959 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 18:13:42,963 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 18:13:43,054 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 18:13:43,054 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 18:13:44,870 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 18:13:45,189 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 18:13:45,548 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 18:13:45,857 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 18:13:46,149 - __main__ - INFO - Resultados de validación:
2025-05-08 18:13:46,149 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 18:13:46,149 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 18:13:46,149 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 18:13:46,149 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 18:13:46,149 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 18:13:46,149 - __main__ - INFO - Optimización y validación completadas en 3.25s
2025-05-08 18:13:46,150 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 18:13:46,150 - __main__ - INFO - {
  "total_time": 61.93571972846985,
  "stage_times": {
    "load_model": 11.907721519470215,
    "file_scan": 0.0009996891021728516,
    "file_processing": 8.780806541442871,
    "quality_improvement": 0.036003828048706055,
    "deduplication": 0.19789767265319824,
    "embedding_generation": 36.14179086685181,
    "db_insertion": 1.568006992340088,
    "optimization": 3.2501726150512695
  },
  "memory_usage": {
    "initial": 213.3359375,
    "after_model": 444.94921875,
    "after_processing": 423.1796875,
    "after_embeddings": 675.73828125,
    "final": 433.51953125
  },
  "files_processed": 2,
  "total_chunks": 319,
  "final_chunks": 305,
  "embeddings_generated": 305
}
2025-05-08 18:18:26,749 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': False, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:18:26,750 - __main__ - INFO - Memoria inicial: 213.09 MB
2025-05-08 18:18:26,750 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:18:33,779 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:21:14,524 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:21:14,525 - __main__ - INFO - Memoria inicial: 212.97 MB
2025-05-08 18:21:14,525 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:21:20,834 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:21:25,875 - __main__ - INFO - Modelo de embeddings cargado en 11.35s
2025-05-08 18:21:25,875 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 18:21:25,876 - __main__ - INFO - Memoria después de cargar modelo: 468.84 MB
2025-05-08 18:21:25,965 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 18:21:25,965 - __main__ - INFO - Archivos encontrados: 2 (Total: 3.22 MB)
2025-05-08 18:21:25,965 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 18:21:29,962 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 18:21:30,640 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-08 18:21:31,823 - __main__ - INFO - Procesamiento de archivos completado en 5.86s
2025-05-08 18:21:31,823 - __main__ - INFO - Chunks generados: 98
2025-05-08 18:21:31,823 - __main__ - INFO - Memoria después de procesar archivos: 468.53 MB
2025-05-08 18:21:31,831 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 18:21:31,831 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 18:21:31,849 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 18:21:31,849 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 18:21:31,849 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 18:21:48,672 - __main__ - INFO - Generación de embeddings completada en 16.82s
2025-05-08 18:21:48,674 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 18:21:48,677 - __main__ - INFO - Memoria después de generar embeddings: 726.53 MB
2025-05-08 18:21:48,678 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 18:21:48,678 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 18:21:49,087 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 18:21:49,577 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 18:21:49,577 - __main__ - INFO - Inserción en base de datos completada en 0.90s
2025-05-08 18:21:49,657 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 18:21:49,662 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 18:21:49,736 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 18:21:49,736 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 18:21:50,965 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 18:21:51,299 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 18:21:51,643 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 18:21:51,958 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 18:21:52,272 - __main__ - INFO - Resultados de validación:
2025-05-08 18:21:52,273 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 18:21:52,273 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 18:21:52,273 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 18:21:52,273 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 18:21:52,273 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 18:21:52,273 - __main__ - INFO - Optimización y validación completadas en 2.70s
2025-05-08 18:21:52,273 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 18:21:52,274 - __main__ - INFO - {
  "total_time": 37.748804807662964,
  "stage_times": {
    "load_model": 11.349525928497314,
    "file_scan": 0.00099945068359375,
    "file_processing": 5.857688903808594,
    "quality_improvement": 0.008840322494506836,
    "deduplication": 0.017999887466430664,
    "embedding_generation": 16.820853233337402,
    "db_insertion": 0.8989078998565674,
    "optimization": 2.696274518966675
  },
  "memory_usage": {
    "initial": 212.96875,
    "after_model": 468.83984375,
    "after_processing": 468.52734375,
    "after_embeddings": 726.53125,
    "final": 410.1328125
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 18:23:28,722 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:23:28,723 - __main__ - INFO - Memoria inicial: 213.47 MB
2025-05-08 18:23:28,723 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:23:36,149 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:23:39,040 - __main__ - ERROR - Error durante el procesamiento: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)
2025-05-08 18:23:39,348 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1508, in main
    embeddings = HuggingFaceEmbeddings(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4399, in from_pretrained
    ) = cls._load_pretrained_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4638, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 513, in load_state_dict
    with safe_open(checkpoint_file, framework="pt") as f:
OSError: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)

2025-05-08 18:23:39,348 - __main__ - CRITICAL - Error crítico en el proceso de ingesta: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)
2025-05-08 18:23:39,348 - __main__ - CRITICAL - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1508, in main
    embeddings = HuggingFaceEmbeddings(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4399, in from_pretrained
    ) = cls._load_pretrained_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4638, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 513, in load_state_dict
    with safe_open(checkpoint_file, framework="pt") as f:
OSError: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)

2025-05-08 18:24:47,392 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:24:47,393 - __main__ - INFO - Memoria inicial: 213.23 MB
2025-05-08 18:24:47,393 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:24:54,089 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:24:56,570 - __main__ - ERROR - Error durante el procesamiento: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)
2025-05-08 18:24:56,580 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1508, in main
    embeddings = HuggingFaceEmbeddings(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4399, in from_pretrained
    ) = cls._load_pretrained_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4638, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 513, in load_state_dict
    with safe_open(checkpoint_file, framework="pt") as f:
OSError: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)

2025-05-08 18:24:56,581 - __main__ - CRITICAL - Error crítico en el proceso de ingesta: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)
2025-05-08 18:24:56,581 - __main__ - CRITICAL - Traceback (most recent call last):
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\ingest.py", line 1508, in main
    embeddings = HuggingFaceEmbeddings(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_core\_api\deprecation.py", line 224, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\langchain_community\embeddings\huggingface.py", line 92, in __init__
    self.client = sentence_transformers.SentenceTransformer(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 309, in __init__
    modules, self.module_kwargs = self._load_sbert_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\SentenceTransformer.py", line 1808, in _load_sbert_model
    module = module_class(model_name_or_path, cache_dir=cache_folder, backend=self.backend, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 81, in __init__
    self._load_model(model_name_or_path, config, cache_dir, backend, is_peft_model, **model_args)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\sentence_transformers\models\Transformer.py", line 181, in _load_model
    self.auto_model = AutoModel.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\models\auto\auto_factory.py", line 571, in from_pretrained
    return model_class.from_pretrained(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 279, in _wrapper
    return func(*args, **kwargs)
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4399, in from_pretrained
    ) = cls._load_pretrained_model(
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 4638, in _load_pretrained_model
    load_state_dict(checkpoint_files[0], map_location="meta", weights_only=weights_only).keys()
  File "C:\Users\Gonzalo\Desktop\RAG-as-a-Service\backend\.venv\lib\site-packages\transformers\modeling_utils.py", line 513, in load_state_dict
    with safe_open(checkpoint_file, framework="pt") as f:
OSError: El archivo de paginación es demasiado pequeño para completar la operación. (os error 1455)

2025-05-08 18:26:29,586 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:26:29,587 - __main__ - INFO - Memoria inicial: 213.14 MB
2025-05-08 18:26:29,587 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:26:36,090 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:26:40,758 - __main__ - INFO - Modelo de embeddings cargado en 11.17s
2025-05-08 18:26:40,758 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 18:26:40,758 - __main__ - INFO - Memoria después de cargar modelo: 510.96 MB
2025-05-08 18:26:40,808 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 18:26:40,808 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 18:26:40,808 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 18:26:44,779 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 18:26:44,866 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 18:26:45,390 - __main__ - INFO - Procesamiento de archivos completado en 4.58s
2025-05-08 18:26:45,390 - __main__ - INFO - Chunks generados: 98
2025-05-08 18:26:45,390 - __main__ - INFO - Memoria después de procesar archivos: 511.39 MB
2025-05-08 18:26:45,399 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 18:26:45,399 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 18:26:45,417 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 18:26:45,417 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 18:26:45,417 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 18:27:02,206 - __main__ - INFO - Generación de embeddings completada en 16.79s
2025-05-08 18:27:02,208 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 18:27:02,212 - __main__ - INFO - Memoria después de generar embeddings: 719.55 MB
2025-05-08 18:27:02,212 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 18:27:02,212 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 18:27:02,765 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 18:27:03,184 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 18:27:03,185 - __main__ - INFO - Inserción en base de datos completada en 0.97s
2025-05-08 18:27:03,253 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 18:27:03,257 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 18:27:03,325 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 18:27:03,325 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 18:27:04,538 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 18:27:04,864 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 18:27:05,151 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 18:27:05,426 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 18:27:05,757 - __main__ - INFO - Resultados de validación:
2025-05-08 18:27:05,757 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 18:27:05,757 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 18:27:05,757 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 18:27:05,757 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 18:27:05,757 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 18:27:05,757 - __main__ - INFO - Optimización y validación completadas en 2.57s
2025-05-08 18:27:05,757 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 18:27:05,758 - __main__ - INFO - {
  "total_time": 36.169400691986084,
  "stage_times": {
    "load_model": 11.170156955718994,
    "file_scan": 0.0009996891021728516,
    "file_processing": 4.58125114440918,
    "quality_improvement": 0.009000301361083984,
    "deduplication": 0.01799798011779785,
    "embedding_generation": 16.78717875480652,
    "db_insertion": 0.9734761714935303,
    "optimization": 2.571425437927246
  },
  "memory_usage": {
    "initial": 213.140625,
    "after_model": 510.96484375,
    "after_processing": 511.39453125,
    "after_embeddings": 719.5546875,
    "final": 410.921875
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 18:31:35,478 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 18:31:35,478 - __main__ - INFO - Memoria inicial: 213.05 MB
2025-05-08 18:31:35,479 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 18:31:43,227 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 18:31:48,589 - __main__ - INFO - Modelo de embeddings cargado en 13.11s
2025-05-08 18:31:48,589 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 18:31:48,590 - __main__ - INFO - Memoria después de cargar modelo: 456.17 MB
2025-05-08 18:31:48,592 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 18:31:48,592 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 18:31:48,592 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 18:31:53,094 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 18:31:53,096 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 18:31:53,618 - __main__ - INFO - Procesamiento de archivos completado en 5.03s
2025-05-08 18:31:53,619 - __main__ - INFO - Chunks generados: 98
2025-05-08 18:31:53,619 - __main__ - INFO - Memoria después de procesar archivos: 457.14 MB
2025-05-08 18:31:53,629 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 18:31:53,629 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 18:31:53,647 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 18:31:53,647 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 18:31:53,647 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 18:32:09,767 - __main__ - INFO - Generación de embeddings completada en 16.12s
2025-05-08 18:32:09,771 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 18:32:09,776 - __main__ - INFO - Memoria después de generar embeddings: 671.50 MB
2025-05-08 18:32:09,776 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 18:32:09,778 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 18:32:10,297 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 18:32:10,693 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 18:32:10,694 - __main__ - INFO - Inserción en base de datos completada en 0.92s
2025-05-08 18:32:10,747 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 18:32:10,752 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 18:32:10,836 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 18:32:10,836 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 18:32:12,166 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 18:32:12,490 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 18:32:12,820 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 18:32:13,116 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 18:32:13,411 - __main__ - INFO - Resultados de validación:
2025-05-08 18:32:13,411 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 18:32:13,411 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 18:32:13,411 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 18:32:13,411 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 18:32:13,411 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 18:32:13,411 - __main__ - INFO - Optimización y validación completadas en 2.72s
2025-05-08 18:32:13,411 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 18:32:13,412 - __main__ - INFO - {
  "total_time": 37.93296408653259,
  "stage_times": {
    "load_model": 13.1094810962677,
    "file_scan": 0.0,
    "file_processing": 5.026559591293335,
    "quality_improvement": 0.00999903678894043,
    "deduplication": 0.017575979232788086,
    "embedding_generation": 16.118626832962036,
    "db_insertion": 0.91796875,
    "optimization": 2.7175331115722656
  },
  "memory_usage": {
    "initial": 213.05078125,
    "after_model": 456.171875,
    "after_processing": 457.14453125,
    "after_embeddings": 671.50390625,
    "final": 411.453125
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 20:44:10,886 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 20:44:10,887 - __main__ - INFO - Memoria inicial: 213.64 MB
2025-05-08 20:44:10,887 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 20:44:17,535 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 20:44:23,966 - __main__ - INFO - Modelo de embeddings cargado en 13.08s
2025-05-08 20:44:23,967 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 20:44:23,967 - __main__ - INFO - Memoria después de cargar modelo: 446.80 MB
2025-05-08 20:44:23,971 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 20:44:23,971 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 20:44:23,971 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 20:44:29,003 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 20:44:29,006 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 20:44:29,567 - __main__ - INFO - Procesamiento de archivos completado en 5.60s
2025-05-08 20:44:29,568 - __main__ - INFO - Chunks generados: 98
2025-05-08 20:44:29,568 - __main__ - INFO - Memoria después de procesar archivos: 446.71 MB
2025-05-08 20:44:29,578 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 20:44:29,578 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 20:44:29,604 - __main__ - INFO - Deduplicación completada en 0.03s
2025-05-08 20:44:29,604 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 20:44:29,604 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 20:44:44,924 - __main__ - INFO - Generación de embeddings completada en 15.32s
2025-05-08 20:44:44,926 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 20:44:44,928 - __main__ - INFO - Memoria después de generar embeddings: 722.83 MB
2025-05-08 20:44:44,929 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 20:44:44,929 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 20:44:45,483 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 20:44:45,958 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 20:44:45,958 - __main__ - INFO - Inserción en base de datos completada en 1.03s
2025-05-08 20:44:46,014 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 20:44:46,018 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 20:44:46,073 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 20:44:46,073 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 20:44:47,309 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 20:44:47,638 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 20:44:47,946 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 20:44:48,207 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 20:44:48,500 - __main__ - INFO - Resultados de validación:
2025-05-08 20:44:48,500 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 20:44:48,500 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 20:44:48,500 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 20:44:48,501 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 20:44:48,501 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 20:44:48,501 - __main__ - INFO - Optimización y validación completadas en 2.54s
2025-05-08 20:44:48,501 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 20:44:48,503 - __main__ - INFO - {
  "total_time": 37.61456322669983,
  "stage_times": {
    "load_model": 13.079202651977539,
    "file_scan": 0.0,
    "file_processing": 5.5961527824401855,
    "quality_improvement": 0.009525060653686523,
    "deduplication": 0.026046037673950195,
    "embedding_generation": 15.31832218170166,
    "db_insertion": 1.030346155166626,
    "optimization": 2.543332099914551
  },
  "memory_usage": {
    "initial": 213.64453125,
    "after_model": 446.796875,
    "after_processing": 446.71484375,
    "after_embeddings": 722.828125,
    "final": 411.3203125
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 21:07:56,760 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 21:07:56,761 - __main__ - INFO - Memoria inicial: 213.80 MB
2025-05-08 21:07:56,761 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 21:08:05,146 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 21:08:11,281 - __main__ - INFO - Modelo de embeddings cargado en 14.52s
2025-05-08 21:08:11,281 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 21:08:11,282 - __main__ - INFO - Memoria después de cargar modelo: 505.11 MB
2025-05-08 21:08:11,284 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 21:08:11,284 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 21:08:11,284 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 21:08:15,814 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 21:08:15,818 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 21:08:16,381 - __main__ - INFO - Procesamiento de archivos completado en 5.10s
2025-05-08 21:08:16,381 - __main__ - INFO - Chunks generados: 98
2025-05-08 21:08:16,381 - __main__ - INFO - Memoria después de procesar archivos: 505.48 MB
2025-05-08 21:08:16,391 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 21:08:16,391 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 21:08:16,415 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 21:08:16,416 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 21:08:16,416 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 21:08:32,224 - __main__ - INFO - Generación de embeddings completada en 15.81s
2025-05-08 21:08:32,225 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 21:08:32,225 - __main__ - INFO - Memoria después de generar embeddings: 869.40 MB
2025-05-08 21:08:32,226 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 21:08:32,227 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 21:08:32,827 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 21:08:33,245 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 21:08:33,245 - __main__ - INFO - Inserción en base de datos completada en 1.02s
2025-05-08 21:08:33,299 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 21:08:33,302 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 21:08:33,381 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 21:08:33,382 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 21:08:34,419 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 21:08:34,724 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 21:08:35,022 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 21:08:35,304 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 21:08:35,618 - __main__ - INFO - Resultados de validación:
2025-05-08 21:08:35,618 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 21:08:35,618 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 21:08:35,618 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 21:08:35,618 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 21:08:35,618 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 21:08:35,618 - __main__ - INFO - Optimización y validación completadas en 2.37s
2025-05-08 21:08:35,618 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 21:08:35,619 - __main__ - INFO - {
  "total_time": 38.85634994506836,
  "stage_times": {
    "load_model": 14.520115375518799,
    "file_scan": 0.000997781753540039,
    "file_processing": 5.095330715179443,
    "quality_improvement": 0.010045051574707031,
    "deduplication": 0.023630857467651367,
    "embedding_generation": 15.807713508605957,
    "db_insertion": 1.0192594528198242,
    "optimization": 2.3716177940368652
  },
  "memory_usage": {
    "initial": 213.8046875,
    "after_model": 505.11328125,
    "after_processing": 505.4765625,
    "after_embeddings": 869.40234375,
    "final": 482.453125
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 21:10:48,641 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 21:10:48,642 - __main__ - INFO - Memoria inicial: 213.42 MB
2025-05-08 21:10:48,642 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 21:10:56,713 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 21:11:02,803 - __main__ - INFO - Modelo de embeddings cargado en 14.16s
2025-05-08 21:11:02,804 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 21:11:02,805 - __main__ - INFO - Memoria después de cargar modelo: 459.30 MB
2025-05-08 21:11:02,806 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 21:11:02,806 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 21:11:02,806 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 21:11:07,472 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 21:11:07,475 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 21:11:08,024 - __main__ - INFO - Procesamiento de archivos completado en 5.22s
2025-05-08 21:11:08,024 - __main__ - INFO - Chunks generados: 98
2025-05-08 21:11:08,025 - __main__ - INFO - Memoria después de procesar archivos: 460.22 MB
2025-05-08 21:11:08,037 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 21:11:08,038 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 21:11:08,061 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 21:11:08,061 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 21:11:08,061 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 21:11:24,387 - __main__ - INFO - Generación de embeddings completada en 16.32s
2025-05-08 21:11:24,390 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 21:11:24,393 - __main__ - INFO - Memoria después de generar embeddings: 855.95 MB
2025-05-08 21:11:24,393 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 21:11:24,395 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 21:11:24,993 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 21:11:25,513 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 21:11:25,513 - __main__ - INFO - Inserción en base de datos completada en 1.12s
2025-05-08 21:11:25,571 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 21:11:25,576 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 21:11:25,683 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 21:11:25,683 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 21:11:27,053 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 21:11:27,426 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 21:11:27,786 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 21:11:28,181 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 21:11:28,468 - __main__ - INFO - Resultados de validación:
2025-05-08 21:11:28,468 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 21:11:28,468 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 21:11:28,468 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 21:11:28,468 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 21:11:28,469 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 21:11:28,469 - __main__ - INFO - Optimización y validación completadas en 2.96s
2025-05-08 21:11:28,469 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 21:11:28,469 - __main__ - INFO - {
  "total_time": 39.82667684555054,
  "stage_times": {
    "load_model": 14.160293579101562,
    "file_scan": 0.001001596450805664,
    "file_processing": 5.2180986404418945,
    "quality_improvement": 0.011981725692749023,
    "deduplication": 0.0232393741607666,
    "embedding_generation": 16.324365854263306,
    "db_insertion": 1.1195244789123535,
    "optimization": 2.956188201904297
  },
  "memory_usage": {
    "initial": 213.41796875,
    "after_model": 459.296875,
    "after_processing": 460.21875,
    "after_embeddings": 855.953125,
    "final": 460.71875
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-08 21:19:27,253 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-08 21:19:27,255 - __main__ - INFO - Memoria inicial: 213.87 MB
2025-05-08 21:19:27,255 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-08 21:19:35,165 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-08 21:19:40,407 - __main__ - INFO - Modelo de embeddings cargado en 13.15s
2025-05-08 21:19:40,408 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-08 21:19:40,408 - __main__ - INFO - Memoria después de cargar modelo: 496.85 MB
2025-05-08 21:19:40,410 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-08 21:19:40,410 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-08 21:19:40,410 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-08 21:19:44,932 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-08 21:19:44,935 - __mp_main__ - INFO - Usando chunks cacheados para bitcoin.pdf
2025-05-08 21:19:45,526 - __main__ - INFO - Procesamiento de archivos completado en 5.12s
2025-05-08 21:19:45,527 - __main__ - INFO - Chunks generados: 98
2025-05-08 21:19:45,527 - __main__ - INFO - Memoria después de procesar archivos: 497.56 MB
2025-05-08 21:19:45,536 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-08 21:19:45,536 - __main__ - INFO - Chunks después de mejora: 97
2025-05-08 21:19:45,554 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-08 21:19:45,554 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-08 21:19:45,554 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-08 21:20:01,686 - __main__ - INFO - Generación de embeddings completada en 16.13s
2025-05-08 21:20:01,686 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-08 21:20:01,686 - __main__ - INFO - Memoria después de generar embeddings: 992.04 MB
2025-05-08 21:20:01,686 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-08 21:20:01,686 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-08 21:20:02,107 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-08 21:20:02,573 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-08 21:20:02,573 - __main__ - INFO - Inserción en base de datos completada en 0.89s
2025-05-08 21:20:02,635 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-08 21:20:02,639 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-08 21:20:02,709 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-08 21:20:02,709 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-08 21:20:03,865 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-08 21:20:04,210 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-08 21:20:04,522 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-08 21:20:04,802 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-08 21:20:05,089 - __main__ - INFO - Resultados de validación:
2025-05-08 21:20:05,089 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-08 21:20:05,089 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.20
2025-05-08 21:20:05,089 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-08 21:20:05,089 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-08 21:20:05,089 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-08 21:20:05,090 - __main__ - INFO - Optimización y validación completadas en 2.52s
2025-05-08 21:20:05,090 - __main__ - INFO - Reporte de rendimiento:
2025-05-08 21:20:05,090 - __main__ - INFO - {
  "total_time": 37.83444380760193,
  "stage_times": {
    "load_model": 13.151521921157837,
    "file_scan": 0.0005815029144287109,
    "file_processing": 5.116038084030151,
    "quality_improvement": 0.008739709854125977,
    "deduplication": 0.017892122268676758,
    "embedding_generation": 16.132115602493286,
    "db_insertion": 0.8875012397766113,
    "optimization": 2.5163705348968506
  },
  "memory_usage": {
    "initial": 213.87109375,
    "after_model": 496.8515625,
    "after_processing": 497.55859375,
    "after_embeddings": 992.03515625,
    "final": 549.015625
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-11 11:30:11,372 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf', 'txt', 'docx', 'md'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-11 11:30:11,374 - __main__ - INFO - Memoria inicial: 213.49 MB
2025-05-11 11:30:11,374 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-11 11:30:42,925 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-11 11:30:49,778 - __main__ - INFO - Modelo de embeddings cargado en 38.40s
2025-05-11 11:30:49,779 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-11 11:30:49,781 - __main__ - INFO - Memoria después de cargar modelo: 435.53 MB
2025-05-11 11:30:49,784 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-11 11:30:49,785 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-11 11:30:49,785 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-11 11:30:55,328 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-11 11:30:56,887 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-11 11:30:58,114 - __main__ - INFO - Procesamiento de archivos completado en 8.33s
2025-05-11 11:30:58,115 - __main__ - INFO - Chunks generados: 98
2025-05-11 11:30:58,115 - __main__ - INFO - Memoria después de procesar archivos: 436.93 MB
2025-05-11 11:30:58,127 - __main__ - INFO - Mejora de calidad completada en 0.01s
2025-05-11 11:30:58,127 - __main__ - INFO - Chunks después de mejora: 97
2025-05-11 11:30:58,147 - __main__ - INFO - Deduplicación completada en 0.02s
2025-05-11 11:30:58,148 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-11 11:30:58,148 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-11 11:31:13,946 - __main__ - INFO - Generación de embeddings completada en 15.80s
2025-05-11 11:31:13,946 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-11 11:31:13,947 - __main__ - INFO - Memoria después de generar embeddings: 941.18 MB
2025-05-11 11:31:13,947 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-11 11:31:13,948 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-11 11:31:16,302 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-11 11:31:16,803 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-11 11:31:16,803 - __main__ - INFO - Inserción en base de datos completada en 2.86s
2025-05-11 11:31:16,907 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-11 11:31:16,911 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-11 11:31:17,010 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-11 11:31:17,011 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-11 11:31:17,541 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-11 11:31:17,972 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-11 11:31:18,287 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-11 11:31:18,587 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-11 11:31:18,884 - __main__ - INFO - Resultados de validación:
2025-05-11 11:31:18,884 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-11 11:31:18,885 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-11 11:31:18,885 - __main__ - INFO -   - Superposición media entre métodos: 1.20
2025-05-11 11:31:18,886 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-11 11:31:18,887 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-11 11:31:18,887 - __main__ - INFO - Optimización y validación completadas en 2.08s
2025-05-11 11:31:18,887 - __main__ - INFO - Reporte de rendimiento:
2025-05-11 11:31:18,888 - __main__ - INFO - {
  "total_time": 67.51360774040222,
  "stage_times": {
    "load_model": 38.40395164489746,
    "file_scan": 0.0022864341735839844,
    "file_processing": 8.328988313674927,
    "quality_improvement": 0.011005878448486328,
    "deduplication": 0.01816272735595703,
    "embedding_generation": 15.79634976387024,
    "db_insertion": 2.856370210647583,
    "optimization": 2.0842816829681396
  },
  "memory_usage": {
    "initial": 213.4921875,
    "after_model": 435.53125,
    "after_processing": 436.9296875,
    "after_embeddings": 941.1796875,
    "final": 511.46875
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-11 11:31:18,890 - __main__ - INFO - Limpieza de recursos...
2025-05-11 11:35:18,403 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'en', 'es'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': False}
2025-05-11 11:35:18,403 - __main__ - INFO - Memoria inicial: 213.56 MB
2025-05-11 11:35:18,404 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-11 11:35:25,828 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-11 11:35:31,605 - __main__ - INFO - Modelo de embeddings cargado en 13.20s
2025-05-11 11:35:31,606 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-11 11:35:31,606 - __main__ - INFO - Memoria después de cargar modelo: 459.82 MB
2025-05-11 11:35:31,625 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-11 11:35:31,625 - __main__ - INFO - Archivos encontrados: 1 (Total: 0.18 MB)
2025-05-11 11:35:31,625 - __main__ - INFO - Archivos a procesar: 1 (Tamaño: 0.18 MB)
2025-05-11 11:35:35,970 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-11 11:35:36,754 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-11 11:35:38,043 - __main__ - INFO - Procesamiento de archivos completado en 6.42s
2025-05-11 11:35:38,044 - __main__ - INFO - Chunks generados: 98
2025-05-11 11:35:38,044 - __main__ - INFO - Memoria después de procesar archivos: 460.79 MB
2025-05-11 11:35:38,060 - __main__ - INFO - Mejora de calidad completada en 0.02s
2025-05-11 11:35:38,060 - __main__ - INFO - Chunks después de mejora: 97
2025-05-11 11:35:38,099 - __main__ - INFO - Deduplicación completada en 0.04s
2025-05-11 11:35:38,099 - __main__ - INFO - Chunks después de deduplicación: 97
2025-05-11 11:35:38,100 - __main__ - INFO - Procesando embeddings en un solo hilo
2025-05-11 11:35:55,366 - __main__ - INFO - Generación de embeddings completada en 17.27s
2025-05-11 11:35:55,367 - __main__ - INFO - Pares Doc-Embedding generados: 97
2025-05-11 11:35:55,368 - __main__ - INFO - Memoria después de generar embeddings: 780.30 MB
2025-05-11 11:35:55,368 - __main__ - INFO - Insertando 97 embeddings en PGVector...
2025-05-11 11:35:55,368 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: False
2025-05-11 11:35:55,832 - __main__ - INFO - Iniciando inserción de 97 embeddings en 1 lotes de tamaño 100.
2025-05-11 11:35:56,190 - __main__ - INFO - Insertados 97 documentos en la colección 'manual_e5_multi'.
2025-05-11 11:35:56,190 - __main__ - INFO - Inserción en base de datos completada en 0.82s
2025-05-11 11:35:56,280 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-11 11:35:56,284 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-11 11:35:56,378 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-11 11:35:56,378 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-11 11:35:57,863 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-11 11:35:58,284 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-11 11:35:58,643 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-11 11:35:58,959 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-11 11:35:59,274 - __main__ - INFO - Resultados de validación:
2025-05-11 11:35:59,274 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-11 11:35:59,274 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-11 11:35:59,274 - __main__ - INFO -   - Superposición media entre métodos: 1.40
2025-05-11 11:35:59,274 - __main__ - INFO - Recomendación: La diversidad entre métodos es alta. MMR proporciona resultados significativamente diferentes.
2025-05-11 11:35:59,274 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-11 11:35:59,274 - __main__ - INFO - Optimización y validación completadas en 3.08s
2025-05-11 11:35:59,274 - __main__ - INFO - Reporte de rendimiento:
2025-05-11 11:35:59,275 - __main__ - INFO - {
  "total_time": 40.870813608169556,
  "stage_times": {
    "load_model": 13.201050758361816,
    "file_scan": 0.0010781288146972656,
    "file_processing": 6.417391061782837,
    "quality_improvement": 0.01599287986755371,
    "deduplication": 0.03853130340576172,
    "embedding_generation": 17.265121698379517,
    "db_insertion": 0.8227591514587402,
    "optimization": 3.0837936401367188
  },
  "memory_usage": {
    "initial": 213.55859375,
    "after_model": 459.8203125,
    "after_processing": 460.78515625,
    "after_embeddings": 780.30078125,
    "final": 411.9453125
  },
  "files_processed": 1,
  "total_chunks": 98,
  "final_chunks": 97,
  "embeddings_generated": 97
}
2025-05-11 12:01:31,265 - __main__ - INFO - Configuración de ingesta cargada: {'docs_dir': WindowsPath('C:/Users/Gonzalo/Desktop/RAG-as-a-Service/backend/api/../docs'), 'cache_dir': WindowsPath('.cache'), 'embed_model': 'intfloat/multilingual-e5-base', 'collection_name': 'manual_e5_multi', 'chunk_size': 384, 'chunk_overlap': 64, 'batch_size': 128, 'max_workers': 11, 'max_embed_workers': 4, 'allowed_languages': {'es', 'en'}, 'file_extensions': ['pdf'], 'deduplication': True, 'similarity_threshold': 0.95, 'incremental': True, 'semantic_chunking': True, 'dynamic_chunking': True, 'reset_vector_collection': True}
2025-05-11 12:01:31,266 - __main__ - INFO - Memoria inicial: 213.41 MB
2025-05-11 12:01:31,267 - __main__ - INFO - Cargando modelo de embeddings: intfloat/multilingual-e5-base...
2025-05-11 12:01:38,950 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: intfloat/multilingual-e5-base
2025-05-11 12:01:44,461 - __main__ - INFO - Modelo de embeddings cargado en 13.19s
2025-05-11 12:01:44,461 - __main__ - INFO - Dimensión de embeddings: 768
2025-05-11 12:01:44,461 - __main__ - INFO - Memoria después de cargar modelo: 442.51 MB
2025-05-11 12:01:44,463 - __main__ - INFO - Escaneo de archivos completado en 0.00s
2025-05-11 12:01:44,463 - __main__ - INFO - Archivos encontrados: 2 (Total: 1.15 MB)
2025-05-11 12:01:44,463 - __main__ - INFO - Archivos a procesar: 2 (Tamaño: 1.15 MB)
2025-05-11 12:01:50,012 - __mp_main__ - INFO - Procesando bitcoin.pdf...
2025-05-11 12:01:50,013 - __mp_main__ - INFO - Procesando L00001-00088.pdf...
2025-05-11 12:01:50,936 - __mp_main__ - INFO - Chunking dinámico para bitcoin.pdf: size=338, overlap=112 (doc tipo: scientific_pdf, densidad: 0.26)
2025-05-11 12:01:52,067 - __mp_main__ - INFO - Chunking dinámico para L00001-00088.pdf: size=300, overlap=100 (doc tipo: legal_pdf, densidad: 0.06)
2025-05-11 12:02:05,872 - __main__ - INFO - Procesamiento de archivos completado en 21.41s
2025-05-11 12:02:05,872 - __main__ - INFO - Chunks generados: 1851
2025-05-11 12:02:05,873 - __main__ - INFO - Memoria después de procesar archivos: 447.80 MB
2025-05-11 12:02:06,057 - __main__ - INFO - Mejora de calidad completada en 0.18s
2025-05-11 12:02:06,058 - __main__ - INFO - Chunks después de mejora: 1823
2025-05-11 12:02:13,673 - __main__ - INFO - Deduplicación completada en 7.61s
2025-05-11 12:02:13,673 - __main__ - INFO - Chunks después de deduplicación: 1822
2025-05-11 12:02:13,673 - __main__ - INFO - Procesando embeddings en paralelo: 1822 chunks, 4 workers, 13 bloques
2025-05-11 12:04:24,864 - __main__ - INFO - Generación de embeddings completada en 131.19s
2025-05-11 12:04:24,867 - __main__ - INFO - Pares Doc-Embedding generados: 1822
2025-05-11 12:04:24,869 - __main__ - INFO - Memoria después de generar embeddings: 529.95 MB
2025-05-11 12:04:24,869 - __main__ - INFO - Insertando 1822 embeddings en PGVector...
2025-05-11 12:04:24,870 - __main__ - INFO - Conectando a PGVector. Colección: manual_e5_multi. Reset colección: True
2025-05-11 12:04:26,453 - __main__ - INFO - Iniciando inserción de 1822 embeddings en 19 lotes de tamaño 100.
2025-05-11 12:04:30,669 - __main__ - INFO - Insertados 1822 documentos en la colección 'manual_e5_multi'.
2025-05-11 12:04:30,669 - __main__ - INFO - Inserción en base de datos completada en 5.80s
2025-05-11 12:04:30,747 - __main__ - INFO - Creando índice GIN para metadatos en manual_e5_multi
2025-05-11 12:04:30,752 - __main__ - ERROR - Error al optimizar búsqueda vectorial: schema "langchain_pg_embedding" does not exist

2025-05-11 12:04:30,817 - __main__ - INFO - Realizando validación de calidad de búsqueda...
2025-05-11 12:04:30,817 - __main__ - INFO - Consultando: '¿Cuáles son los principales conceptos del documento?'
2025-05-11 12:04:31,251 - __main__ - INFO - Consultando: 'Resumen del contenido'
2025-05-11 12:04:31,610 - __main__ - INFO - Consultando: 'Aspectos más importantes'
2025-05-11 12:04:31,933 - __main__ - INFO - Consultando: 'Información técnica específica'
2025-05-11 12:04:32,243 - __main__ - INFO - Consultando: 'Detalles legales relevantes'
2025-05-11 12:04:32,610 - __main__ - INFO - Resultados de validación:
2025-05-11 12:04:32,610 - __main__ - INFO -   - Promedio de fuentes por consulta (similarity): 1.00
2025-05-11 12:04:32,610 - __main__ - INFO -   - Promedio de fuentes por consulta (MMR): 1.00
2025-05-11 12:04:32,611 - __main__ - INFO -   - Superposición media entre métodos: 1.60
2025-05-11 12:04:32,611 - __main__ - INFO - Recomendación: Considerar aumentar la diversidad con MMR ajustando el parámetro lambda.
2025-05-11 12:04:32,611 - __main__ - INFO - Recomendación: La búsqueda por similitud y MMR muestran diversidad comparable de fuentes.
2025-05-11 12:04:32,611 - __main__ - INFO - Optimización y validación completadas en 1.94s
2025-05-11 12:04:32,611 - __main__ - INFO - Reporte de rendimiento:
2025-05-11 12:04:32,612 - __main__ - INFO - {
  "total_time": 181.34549808502197,
  "stage_times": {
    "load_model": 13.193999290466309,
    "file_scan": 0.0006096363067626953,
    "file_processing": 21.409245014190674,
    "quality_improvement": 0.18427014350891113,
    "deduplication": 7.614847183227539,
    "embedding_generation": 131.18727612495422,
    "db_insertion": 5.799744606018066,
    "optimization": 1.9414520263671875
  },
  "memory_usage": {
    "initial": 213.41015625,
    "after_model": 442.51171875,
    "after_processing": 447.796875,
    "after_embeddings": 529.94921875,
    "final": 527.05078125
  },
  "files_processed": 2,
  "total_chunks": 1851,
  "final_chunks": 1822,
  "embeddings_generated": 1822
}
2025-05-11 12:04:32,612 - __main__ - INFO - Limpieza de recursos...
